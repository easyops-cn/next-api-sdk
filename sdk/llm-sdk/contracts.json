{
  "name": "llm",
  "contracts": [
    {
      "contract": "llm.agent.BaseGeneralAgent",
      "name": "BaseGeneralAgent",
      "version": "1.0.0",
      "description": "基础agent，支持知识库、执行工具",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/agent/base"
      },
      "import": [
        "easyops/model/aiops_service/llm_chat_agent_task_request",
        "easyops/model/aiops_service/llm_chat_agent_task_response"
      ],
      "request": {
        "type": "LlmChatAgentTaskRequest"
      },
      "response": {
        "type": "LlmChatAgentTaskResponse",
        "description": "接口返回,有两种格式,流式返回为delta, 非流式返回为message\n"
      },
      "examples": [
        {
          "description": {
            "zh": "大模型聊天接口"
          },
          "request": {
            "method": "POST",
            "uri": "http://ip:port/api/v1/llm/agent/base",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            },
            "body": "{\n    \"input\": \"你好啊\",\n    \"agentId\": \"general-helper\"\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"created\": 1703487403,\n  \"type\": \"TEXT\",\n  \"taskId\": \"8239375684858666781\",\n  \"message\": {\n    \"role\":\"assistant\",\n    \"content\":\"有什么可以帮到你\"\n  }\n}"
          }
        },
        {
          "description": {
            "zh": "流式返回"
          },
          "request": {
            "method": "POST",
            "uri": "http://ip:port/api/v1/llm/agent/base",
            "headers": {
              "Content-Type": "application/json",
              "Org": 8888,
              "User": "easyops"
            },
            "body": "{\n  \"input\": \"你好啊\",\n  \"agentId\": \"general-helper\",\n  \"stream\": true\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "text/event-stream"
            },
            "body": "data: {\"created\":1703487403,\"type\":\"TEXT\",\"taskId\":\"8239375684858666781\",\"delta\":{\"role\":\"assistant\",\"content\":\"有什么可以\"}}\\n\\n data: {\"created\":1703487404,\"type\":\"TEXT\",\"taskId\":\"8239375684858666781\",\"delta\":{\"role\":\"assistant\",\"content\":\"帮到你\"}}\\n\\n data: [DONE]"
          }
        }
      ]
    },
    {
      "contract": "llm.agent.WebSearchAgent",
      "name": "WebSearchAgent",
      "version": "1.0.0",
      "description": "网络搜索的agent",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/agent/web_search"
      },
      "import": [
        "easyops/model/aiops_service/llm_chat_agent_task_request",
        "easyops/model/aiops_service/llm_chat_agent_task_response"
      ],
      "request": {
        "type": "LlmChatAgentTaskRequest"
      },
      "response": {
        "type": "LlmChatAgentTaskResponse",
        "description": "接口返回,有两种格式,流式返回为delta, 非流式返回为message\n"
      },
      "examples": [
        {
          "description": {
            "zh": "大模型聊天接口"
          },
          "request": {
            "method": "POST",
            "uri": "http://ip:port/api/v1/llm/agent/web_search",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            },
            "body": "{\n    \"input\": \"你好啊\",\n    \"agentId\": \"general-helper\"\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"created\": 1703487403,\n  \"type\": \"TEXT\",\n  \"taskId\": \"8239375684858666781\",\n  \"message\": {\n    \"role\":\"assistant\",\n    \"content\":\"有什么可以帮到你\"\n  }\n}"
          }
        },
        {
          "description": {
            "zh": "流式返回"
          },
          "request": {
            "method": "POST",
            "uri": "http://ip:port/api/v1/llm/agent/web_search",
            "headers": {
              "Content-Type": "application/json",
              "Org": 8888,
              "User": "easyops"
            },
            "body": "{\n  \"input\": \"你好啊\",\n  \"agentId\": \"general-helper\",\n  \"stream\": true\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "text/event-stream"
            },
            "body": "data: {\"created\":1703487403,\"type\":\"TEXT\",\"taskId\":\"8239375684858666781\",\"delta\":{\"role\":\"assistant\",\"content\":\"有什么可以\"}}\\n\\n data: {\"created\":1703487404,\"type\":\"TEXT\",\"taskId\":\"8239375684858666781\",\"delta\":{\"role\":\"assistant\",\"content\":\"帮到你\"}}\\n\\n data: [DONE]"
          }
        }
      ]
    },
    {
      "contract": "llm.agent_flow.AddJobMessageForAgentFlow",
      "name": "AddJobMessageForAgentFlow",
      "version": "1.0.0",
      "description": "flow agent补充消息",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/agent/flow/:taskId/job/:jobId"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "taskId",
            "type": "string",
            "description": "总任务id"
          },
          {
            "name": "jobId",
            "type": "string",
            "description": "job id，子任务id"
          },
          {
            "name": "input",
            "type": "string",
            "description": "补充输入"
          }
        ]
      },
      "response": null,
      "examples": [
        {
          "description": {
            "zh": "flow agent补充消息"
          },
          "request": {
            "method": "POST",
            "uri": "http://ip:port/api/v1/llm/agent/8239375684858666781/job/job_1546111",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            },
            "body": "{\n    \"input\": \"确认\"\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{ }"
          }
        }
      ]
    },
    {
      "contract": "llm.agent_flow.CreateTaskForAgentFlow",
      "name": "CreateTaskForAgentFlow",
      "version": "1.0.0",
      "description": "创建agent flow的任务",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/agent/flow/create"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "input",
            "type": "string",
            "description": "用户输入"
          },
          {
            "name": "agentId",
            "type": "string",
            "description": "指定处理任务的agent"
          },
          {
            "name": "engineVersion",
            "type": "string",
            "description": "执行任务引擎的版本号"
          }
        ]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "taskId",
            "type": "string",
            "description": "任务id"
          }
        ]
      },
      "examples": [
        {
          "description": {
            "zh": "创建agent flow的任务"
          },
          "request": {
            "method": "POST",
            "uri": "http://ip:port/api/v1/llm/agent/flow/create",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            },
            "body": "{\n    \"input\": \"今天深圳天气\",\n    \"agentId\": \"general-helper\"\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"taskId\": \"8239375684858666781\"\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.agent_flow.ChatForAgentFlow",
      "name": "ChatForAgentFlow",
      "version": "1.0.0",
      "description": "agent flow 连续对话聊天, 流式返回, 则继续执行任务。只返回新的消息",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/agent/flow/chat"
      },
      "import": [
        "easyops/model/llm/flow_agent_task_response"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "input",
            "type": "string",
            "description": "用户输入"
          },
          {
            "name": "taskId",
            "type": "string",
            "description": "任务id, 如果为空, 则创建新任务"
          }
        ],
        "required": [
          "input",
          "taskId"
        ]
      },
      "response": {
        "type": "object",
        "description": "流式返回的数据",
        "fields": [
          {
            "ref": "FlowAgentTaskResponse.*"
          },
          {
            "name": "sseDataList",
            "type": "value[]",
            "description": "流式数据列表"
          }
        ]
      },
      "examples": [
        {
          "description": {
            "zh": "创建agent flow的任务"
          },
          "request": {
            "method": "POST",
            "uri": "http://ip:port/api/v1/llm/agent/flow/create",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            },
            "body": "{\n    \"input\": \"今天深圳天气\",\n    \"taskId\": \"a8239375684858666781\"\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "data: {\"id\":\"a8239375684858666781\", \"state\":\"working\",\"plan\":[{\"id\":\"job_1\",\"instruction\":\"查询城市码\"},{\"id\":\"job_2\",\"instruction\":\"通过城市码查询城市天气\"}]}\\n\\n data: {\"jobs\":[{\"id\":\"job_1\",\"instruction\":\"查询城市码\",\"state\":\"working\",\"toolCall\":{\"name\":\"search_city_code\",\"arguments\":{\"city\":\"深圳\"}}}]}\\n\\n data: {\"jobs\":[{\"id\":\"job_1\",\"state\":\"completed\",\"messages\":[{\"role\":\"assistant\",\"parts\":[{\"type\":\"text\",\"text\":\"SZX\"}]}]}]}\\n\\n data: {\"jobs\":[{\"id\":\"job_2\",\"instruction\":\"通过城市码查询城市天气\",\"state\":\"working\",\"toolCall\":{\"name\":\"search_weather\",\"arguments\":{\"city\":\"SZX\"}}}]}\\n\\n\ndata: [DONE]"
          }
        }
      ]
    },
    {
      "contract": "llm.agent_flow.GetSurveyStatus",
      "name": "GetSurveyStatus",
      "version": "1.0.0",
      "description": "获取agent flow问卷填写状态",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/agent/flow/get_survey_status"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "taskId",
            "type": "string",
            "description": "任务id"
          }
        ]
      },
      "response": {
        "type": "object",
        "description": "是否完成填写",
        "fields": [
          {
            "name": "done",
            "type": "bool",
            "description": "是否完成填写"
          }
        ]
      },
      "examples": [
        {
          "description": {
            "zh": "获取问卷填写状态"
          },
          "request": {
            "method": "POST",
            "uri": "http://ip:port/api/v1/llm/agent/flow/get_survey_status",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            },
            "body": "{\n    \"taskId\": \"111\"\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n    \"done\": true\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.agent_flow.GetTaskDetailForAgentFlow",
      "name": "GetTaskDetailForAgentFlow",
      "version": "1.0.0",
      "description": "获取agent flow任务详情，流式返回",
      "endpoint": {
        "method": "GET",
        "uri": "/api/v1/llm/agent/flow/:taskId"
      },
      "import": [
        "easyops/model/llm/flow_agent_task_response"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "taskId",
            "type": "string",
            "description": "任务id"
          }
        ]
      },
      "response": {
        "type": "object",
        "description": "流式返回的数据",
        "fields": [
          {
            "ref": "FlowAgentTaskResponse.*"
          },
          {
            "name": "sseDataList",
            "type": "value[]",
            "description": "流式数据列表"
          }
        ]
      },
      "examples": [
        {
          "description": {
            "zh": "获取agent flow的详情"
          },
          "request": {
            "method": "GET",
            "uri": "http://ip:port/api/v1/llm/agent/flow/a8239375684858666781",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            },
            "body": "{ }"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "data: {\"id\":\"a8239375684858666781\", \"state\":\"working\",\"plan\":[{\"id\":\"job_1\",\"instruction\":\"查询城市码\"},{\"id\":\"job_2\",\"instruction\":\"通过城市码查询城市天气\"}]}\\n\\n data: {\"jobs\":[{\"id\":\"job_1\",\"instruction\":\"查询城市码\",\"state\":\"working\",\"toolCall\":{\"name\":\"search_city_code\",\"arguments\":{\"city\":\"深圳\"}}}]}\\n\\n data: {\"jobs\":[{\"id\":\"job_1\",\"state\":\"completed\",\"messages\":[{\"role\":\"assistant\",\"parts\":[{\"type\":\"text\",\"text\":\"SZX\"}]}]}]}\\n\\n data: {\"jobs\":[{\"id\":\"job_2\",\"instruction\":\"通过城市码查询城市天气\",\"state\":\"working\",\"toolCall\":{\"name\":\"search_weather\",\"arguments\":{\"city\":\"SZX\"}}}]}\\n\\n\ndata: [DONE]"
          }
        }
      ]
    },
    {
      "contract": "llm.agent_flow.ListAllMcpTools",
      "name": "ListAllMcpTools",
      "version": "1.0.0",
      "description": "列出所有mcp工具",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/agent/flow/mcp_tools/list_all"
      },
      "request": null,
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "data",
            "type": "object[]",
            "description": "mcp工具列表",
            "fields": [
              {
                "name": "name",
                "type": "string",
                "description": "mcp工具名称"
              },
              {
                "name": "description",
                "type": "string",
                "description": "mcp工具描述"
              },
              {
                "name": "title",
                "type": "string",
                "description": "mcp工具标题"
              },
              {
                "name": "server",
                "type": "object",
                "description": "mcp工具server",
                "fields": [
                  {
                    "name": "id",
                    "type": "string",
                    "description": "mcp工具server id"
                  },
                  {
                    "name": "name",
                    "type": "string",
                    "description": "mcp工具server name"
                  }
                ]
              }
            ]
          }
        ]
      },
      "examples": [
        {
          "description": {
            "en": "list all mcp tools",
            "zh": "列出所有mcp工具"
          },
          "request": {
            "method": "POST",
            "uri": "/api/v1/llm/agent/flow/mcp_tools/list_all",
            "headers": {
              "Content-Type": "application/json"
            },
            "body": "{ }"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "body": "{\n    \"code\": 0,\n    \"codeExplain\": \"\",\n    \"error\": \"\",\n    \"data\": [\n          {\n              \"name\": \"mcp_tools_name\",\n              \"description\": \"mcp_tools_description\",\n              \"title\": \"mcp_tools_title\",\n              \"server\": {\n                  \"id\": \"mcp_tools_server_id\",\n                  \"name\": \"mcp_tools_server_name\"\n              }\n          }\n    ]\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.agent_flow.SearchTaskForAgentFlow",
      "name": "SearchTaskForAgentFlow",
      "version": "1.0.0",
      "description": "分页查询agent flow, 默认只查询最近三个页的数据",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/agent/flow/search"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "query",
            "type": "string",
            "description": "对标题进行关键字搜索"
          },
          {
            "name": "limit",
            "type": "int",
            "description": "数据数量大小限制， 默认30"
          },
          {
            "name": "next_token",
            "type": "string",
            "description": "分页token，字符串；向上翻页或向下翻页的token都在这个参数传入。"
          }
        ]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "next_token",
            "type": "string",
            "description": "下一页，查询的token，为空时，没有下一页"
          },
          {
            "name": "previous_token",
            "type": "string",
            "description": "上一页，查询的token，为空时，没有上一页"
          },
          {
            "name": "data",
            "type": "object[]",
            "description": "任务列表",
            "fields": [
              {
                "name": "id",
                "type": "string",
                "description": "任务id"
              },
              {
                "name": "startTime",
                "type": "int",
                "description": "创建时间戳，单位秒"
              },
              {
                "name": "endTime",
                "type": "int",
                "description": "结束时间戳，单位秒"
              },
              {
                "name": "state",
                "type": "string",
                "description": "任务状态，\"submitted\",  \"working\", \"input-required\",\"completed\",\"canceled\",\"failed\", \"unknown\""
              },
              {
                "name": "title",
                "type": "string",
                "description": "标题"
              }
            ]
          }
        ]
      },
      "examples": [
        {
          "description": {
            "en": "search task of flow agent",
            "zh": "分页查询agent flow任务数据"
          },
          "request": {
            "method": "POST",
            "uri": "/api/v1/llm/agent/flow/search",
            "headers": {
              "Content-Type": "application/json"
            },
            "body": "{\n\t\"query\": \"测试标题\",\n    \"limit\": 1\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "body": "{\n    \"code\": 0,\n    \"codeExplain\": \"\",\n    \"error\": \"\",\n    \"data\": {\n         \"next_token\": \"xxxxxxx\",\n          \"previous_token\": \"\",\n          \"data\": [\n              {\n                  \"title\": \"录入应用系统\",\n                  \"startTime\": 1747106187.0,\n                  \"_row_id\": \"00000196c7a4c973af2e063afadd7f7b\",\n                  \"status\": \"completed\",\n                  \"endTime\": 1747106535.0\n                }\n          ]\n    }\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.agent_flow.SubmitSurvey",
      "name": "SubmitSurvey",
      "version": "1.0.0",
      "description": "填写agent flow问卷",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/agent/flow/submit_survey"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "taskId",
            "type": "string",
            "description": "任务id"
          },
          {
            "name": "plan",
            "type": "string[]",
            "description": "对plan的评价"
          },
          {
            "name": "result",
            "type": "string[]",
            "description": "对结论的评价"
          },
          {
            "name": "feedback",
            "type": "string",
            "description": "用户反馈"
          }
        ]
      },
      "response": {
        "type": "object",
        "description": "是否完成填写",
        "fields": [
          {
            "name": "done",
            "type": "bool",
            "description": "是否完成填写"
          }
        ]
      },
      "examples": [
        {
          "description": {
            "zh": "填写调查问卷"
          },
          "request": {
            "method": "POST",
            "uri": "http://ip:port/api/v1/llm/agent/flow/submit_survey",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            },
            "body": "{\n    \"taskId\": \"111\",\n    \"plan\": [\"还行\"],\n    \"result\": [\"还行\"],\n    \"feedback\": \"还有改进空间\"\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n    \"done\": true\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.agent_flow.UpdateStateForAgentFlow",
      "name": "UpdateStateForAgentFlow",
      "version": "1.0.0",
      "description": "flow agent更新任务状态，支持暂停、停止和重启任务",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/agent/flow/:taskId/updateState"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "taskId",
            "type": "string",
            "description": "总任务id"
          },
          {
            "name": "state",
            "type": "string",
            "description": "调整任务状态，可以设置为 stopped， paused, working(paused的任务状态时，可以继续)"
          }
        ]
      },
      "response": null,
      "examples": [
        {
          "description": {
            "zh": "flow agent更新任务状态，支持暂停、停止和重启任务"
          },
          "request": {
            "method": "POST",
            "uri": "http://ip:port/api/v1/llm/agent/8239375684858666781/updateState",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            },
            "body": "{\n    \"state\": \"stopped\"\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n    \"code\": 0,\n    \"codeExplain\": \"\",\n    \"error\": \"\"\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.aiops_base.DeleteEmbedding",
      "name": "DeleteEmbedding",
      "version": "1.1.0",
      "description": "删除向量数据库中的向量",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/aiops_base/embedding/delete"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "namespace",
            "type": "string",
            "description": "知识库id，同search中的命名空间(废弃)"
          },
          {
            "name": "deleteKnowledge",
            "type": "bool",
            "description": "是否删除整个知识库(废弃)"
          },
          {
            "name": "ids",
            "type": "string[]",
            "description": "文档所包含的id列表(废弃)"
          },
          {
            "name": "instanceIds",
            "type": "string[]",
            "description": "文档的instanceId"
          }
        ]
      },
      "response": null,
      "examples": [
        {
          "description": {
            "zh": "删除指定向量"
          },
          "request": {
            "method": "POST",
            "uri": "http://localhost:port/api/v1/llm/aiops_base/embedding/delete",
            "headers": {
              "Content-Type": "application/json",
              "user": "easyops",
              "org": 8888
            },
            "body": "{\n  \"instanceIds\": [\"6211a7e379579\"]\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"data\": null\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.aiops_base.DeleteKnowledge",
      "name": "DeleteKnowledge",
      "version": "1.0.0",
      "description": "删除知识库",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/aiops_base/knowledge/delete"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "instanceId",
            "type": "string",
            "description": "知识库的instanceId"
          }
        ]
      },
      "response": null,
      "examples": [
        {
          "description": {
            "zh": "删除知识库"
          },
          "request": {
            "method": "POST",
            "uri": "http://localhost:port/api/v1/llm/aiops_base/knowledge/delete",
            "headers": {
              "Content-Type": "application/json",
              "user": "easyops",
              "org": 8888
            },
            "body": "{\n  \"instanceId\": \"6211a7e379579\"\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"data\": null\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.aiops_base.ImportDocumentEmbeddings",
      "name": "ImportDocumentEmbeddings",
      "version": "1.0.0",
      "description": "导入document",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/aiops_base/import_doc"
      },
      "import": [
        "easyops/model/llm/llm_document"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "namespace",
            "type": "string",
            "description": "导入的namespace"
          },
          {
            "name": "docId",
            "type": "string",
            "description": "doc id"
          },
          {
            "name": "docList",
            "type": "object[]",
            "description": "导入的document",
            "fields": [
              {
                "name": "pageContent",
                "type": "string",
                "description": "内容"
              },
              {
                "name": "metadata",
                "type": "map",
                "description": "metadata"
              }
            ]
          },
          {
            "name": "append",
            "type": "bool",
            "description": "是否append"
          }
        ]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "docs",
            "type": "LLMDocument[]",
            "description": "解析的文档内容"
          }
        ]
      },
      "examples": [
        {
          "description": {
            "zh": "直接导入document"
          },
          "request": {
            "method": "POST",
            "uri": "http://localhost:8095/api/v1/llm/aiops_base/import_doc",
            "headers": {
              "Content-Type": "application/json",
              "user": "easyops",
              "org": 8888
            },
            "body": "{\n  \"namespace\": \"fal_knowledge\",\n  \"docId\": \"doc1\",\n  “docList”: [\n    {\"pageContent\":\"1\", metadata:{}}\n  ]\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"data\": {\n    \"docs\": [\n      {\"id\":\"id1\", \"len\": 10},\n      {\"id\":\"id2\", \"len\": 11},\n    ]\n  }\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.aiops_base.LLMChatServiceV1",
      "name": "LLMChatServiceV1",
      "version": "1.0.0",
      "description": "大模型聊天接口",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/aiops_base/chat_service"
      },
      "import": [
        "easyops/model/aiops_service/llm_chat_request",
        "easyops/model/aiops_service/llm_chat_response"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "ref": "LLMChatRequest.*"
          }
        ],
        "default": {
          "LLMChatResponse.temperature": 0.1,
          "LLMChatResponse.stream": false
        }
      },
      "response": {
        "type": "object",
        "description": "接口返回,有两种格式,流式返回为sseDataList:[{\"role\":\"assistant\",\"content\":\"abc\"}],非流式返回为LLMChatResponse",
        "fields": [
          {
            "ref": "LLMChatResponse.*"
          },
          {
            "name": "sseDataList",
            "type": "value[]",
            "description": "流式数据列表"
          }
        ]
      },
      "examples": [
        {
          "description": {
            "zh": "大模型聊天接口"
          },
          "request": {
            "method": "POST",
            "uri": "http://localhost:8095/api/v1/llm/aiops_base/chat_service",
            "headers": {
              "Content-Type": "application/json",
              "user": "easyops",
              "org": 8888
            },
            "body": "{\n    \"model\": \"glm-4\",\n    \"messages\": [\n      {\"role\": \"user\", \"content\": \"作为一名营销专家，请为我的产品创作一个吸引人的slogan\"},\n      {\"role\": \"assistant\", \"content\": \"当然，为了创作一个吸引人的slogan，请告诉我一些关于您产品的信息\"},\n      {\"role\": \"user\", \"content\": \"智谱AI开放平台\"},\n      {\"role\": \"assistant\", \"content\": \"智启未来，谱绘无限一智谱AI，让创新触手可及!\"},\n      {\"role\": \"user\", \"content\": \"创造一个更精准、吸引人的slogan\"}\n    ]\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"created\": 1703487403,\n  \"id\": \"8239375684858666781\",\n  \"model\": \"glm-4\",\n  \"request_id\": \"8239375684858666781\",\n  \"choices\": [\n    {\n      \"finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"content\": \"智绘蓝图，AI驱动 —— 智谱AI，让每一刻创新成为可能。\",\n        \"role\": \"assistant\"\n      }\n    }\n  ],\n  \"usage\": {\n    \"completion_tokens\": 217,\n    \"prompt_tokens\": 31,\n    \"total_tokens\": 248\n  }\n}"
          }
        },
        {
          "description": {
            "zh": "调用智谱glm-4模型，流式返回"
          },
          "request": {
            "method": "POST",
            "uri": "http://ip:port/api/v1/llm/aiops_service/chat_service",
            "headers": {
              "Content-Type": "application/json",
              "Org": 8888,
              "User": "easyops"
            },
            "body": "{\n  \"message\": [\n    {\"role\": \"user\", \"content\": \"1+1等于多少\"}\n  ],\n  \"stream\": true,\n  \"model\": \"glm-4\"\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "text/event-stream"
            },
            "body": "data:{\"role\":\"assistant\", \"content\":\"等于\"}\\n\\n data:{\"role\":\"assistant\", \"content\":\"2\"}\\n\\n"
          }
        }
      ]
    },
    {
      "contract": "llm.aiops_base.OpenaiChat",
      "name": "OpenaiChat",
      "version": "1.0.0",
      "description": "通用大模型聊天接口, 直接转发返回大模型请求",
      "endpoint": {
        "method": "POST",
        "uri": "/v1/chat/completions"
      },
      "import": [
        "easyops/model/aiops_service/llm_chat_request",
        "easyops/model/aiops_service/llm_chat_response"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "ref": "LLMChatRequest.*"
          }
        ],
        "default": {
          "LLMChatResponse.temperature": 0.1,
          "LLMChatResponse.stream": false
        }
      },
      "response": {
        "type": "object",
        "description": "接口返回,有两种格式,流式返回为sseDataList:[{\"role\":\"assistant\",\"content\":\"abc\"}],非流式返回为LLMChatResponse",
        "wrapper": false,
        "fields": [
          {
            "ref": "LLMChatResponse.*"
          },
          {
            "name": "sseDataList",
            "type": "value[]",
            "description": "流式数据列表"
          }
        ]
      },
      "examples": [
        {
          "description": {
            "zh": "调用智谱glm-4模型，流式返回"
          },
          "request": {
            "method": "POST",
            "uri": "http://ip:port/api/v1/llm/aiops_base/chat_service_proxy",
            "headers": {
              "Content-Type": "application/json",
              "Org": 8888,
              "User": "easyops"
            },
            "body": "{\n  \"message\": [\n    {\"role\": \"user\", \"content\": \"1+1等于多少\"}\n  ],\n  \"stream\": true,\n  \"model\": \"glm-4\"\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "text/event-stream"
            },
            "body": "data:{\"role\":\"assistant\", \"content\":\"等于\"}\\n\\n data:{\"role\":\"assistant\", \"content\":\"2\"}\\n\\n"
          }
        }
      ]
    },
    {
      "contract": "llm.aiops_base.SearchEmbedding",
      "name": "SearchEmbedding",
      "version": "1.0.0",
      "description": "向向量数据库做相似查询",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/aiops_base/embedding/search"
      },
      "import": [
        "easyops/model/llm/llm_document"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "namespace",
            "type": "string",
            "description": "命名空间"
          },
          {
            "name": "query",
            "type": "string",
            "description": "查询的句子"
          },
          {
            "name": "filter",
            "type": "map",
            "description": "过滤条件"
          },
          {
            "name": "topk",
            "type": "int",
            "description": "返回topk条记录"
          },
          {
            "name": "uniqWithContent",
            "type": "bool",
            "description": "是否按文档内容去重"
          }
        ]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "matchedDocs",
            "type": "LLMDocument[]",
            "description": "相似查询结果"
          }
        ]
      },
      "examples": [
        {
          "description": {
            "zh": "文档向量搜索"
          },
          "request": {
            "method": "POST",
            "uri": "http://localhost:8095/api/v1/llm/aiops_service/embedding/search_doc",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            },
            "body": "{\n    \"namespace\": \"easyops_cmdb123\",\n    \"query\": \"查询负责人为aaa的主机\",\n    \"uniqWithContent\":true,\n    \"topk\": 2\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"data\": {\n    \"matchedDocs\": [\n    {\"pageContent\":\"host:主机\",\"metadata\":{\"id\":\"HOST\",\"name\":\"主机\"}},\n    {\"pageContent\":\"app:应用\",\"metadata\":{\"id\":\"APP\",\"name\":\"应用\"}},\n    ]\n  }\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.aiops_base.UpsertDocument",
      "name": "UpsertDocument",
      "version": "1.0.0",
      "description": "更新或者插入文档",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/aiops_base/upsert_doc"
      },
      "import": [
        "easyops/model/llm/llm_document"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "namespace",
            "type": "string",
            "description": "导入的namespace"
          },
          {
            "name": "filter",
            "type": "map",
            "description": "过滤条件"
          },
          {
            "name": "docList",
            "type": "object[]",
            "description": "导入的document",
            "fields": [
              {
                "name": "pageContent",
                "type": "string",
                "description": "内容"
              },
              {
                "name": "metadata",
                "type": "map",
                "description": "metadata"
              }
            ]
          }
        ]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "docs",
            "type": "LLMDocument[]",
            "description": "解析的文档内容"
          }
        ]
      },
      "examples": [
        {
          "description": {
            "zh": "直接导入document"
          },
          "request": {
            "method": "POST",
            "uri": "http://localhost:8095/api/v1/llm/aiops_base/upsert_doc",
            "headers": {
              "Content-Type": "application/json",
              "user": "easyops",
              "org": 8888
            },
            "body": "{\n  \"namespace\": \"fal_knowledge\",\n  \"filter\":{\"docId\":\"doc1\"},\n  “docList”: [\n    {\"pageContent\":\"1\", metadata:{}}\n  ]\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"data\": {\n    \"docs\": [\n      {\"id\":\"id1\", \"len\": 10},\n      {\"id\":\"id2\", \"len\": 11},\n    ]\n  }\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.aiops_base.UpsertWithDocId",
      "name": "UpsertWithDocId",
      "version": "1.0.0",
      "description": "根据DocId更新或者插入文档",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/aiops_base/upsert_with_doc_id"
      },
      "import": [
        "easyops/model/llm/llm_document"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "namespace",
            "type": "string",
            "description": "导入的namespace"
          },
          {
            "name": "docId",
            "type": "string",
            "description": "文档id"
          },
          {
            "name": "docList",
            "type": "object[]",
            "description": "导入的document",
            "fields": [
              {
                "name": "pageContent",
                "type": "string",
                "description": "内容"
              },
              {
                "name": "metadata",
                "type": "map",
                "description": "metadata"
              }
            ]
          }
        ]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "docs",
            "type": "LLMDocument[]",
            "description": "解析的文档内容"
          }
        ]
      },
      "examples": [
        {
          "description": {
            "zh": "直接导入document"
          },
          "request": {
            "method": "POST",
            "uri": "http://localhost:8095/api/v1/llm/aiops_base/upsert_with_doc_id_",
            "headers": {
              "Content-Type": "application/json",
              "user": "easyops",
              "org": 8888
            },
            "body": "{\n  \"namespace\": \"fal_knowledge\",\n  \"docId\":\"doc1\",\n  “docList”: [\n    {\"pageContent\":\"1\", metadata:{}}\n  ]\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"data\": {\n    \"docs\": [\n      {\"id\":\"id1\", \"len\": 10},\n      {\"id\":\"id2\", \"len\": 11},\n    ]\n  }\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.aiops_memory.CreateMemoryEnv",
      "name": "CreateMemoryEnv",
      "version": "1.0.0",
      "description": "创建大模型记忆的调试环境",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/aiops_service/memory/env/create"
      },
      "import": [
        "easyops/model/llm/llm_memory_env"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "ref": "LLMMemoryEnv.*"
          }
        ]
      },
      "response": {
        "type": "LLMMemoryEnv"
      },
      "examples": [
        {
          "description": {
            "zh": "创建大模型记忆的调试环境"
          },
          "request": {
            "method": "PUT",
            "uri": "http://localhost:8320/api/v1/llm/aiops_service/memory/env/create",
            "headers": {
              "Content-Type": "application/json",
              "user": "easyops",
              "org": 1234
            },
            "body": "{\n    \"name\": \"测试1环境\",\n    \"remark\": \"Google搜索专用\"\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"data\": {\n    \"_row_id\": \"xxxxxx\"\n    \"name\": \"测试1环境\",\n    \"remark\": \"Google搜索专用\",\n    \"\"\n  }\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.aiops_memory.DeleteLlmMemoryWithConversationId",
      "name": "DeleteLlmMemoryWithConversationId",
      "version": "1.0.0",
      "description": "通过会话id删除大模型记忆",
      "endpoint": {
        "method": "DELETE",
        "uri": "/api/v1/llm/aiops_service/memory/delete/:conversationId"
      },
      "import": [
        "easyops/model/llm/llm_memory"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "conversationId",
            "type": "string",
            "description": "会话id"
          }
        ]
      },
      "response": null,
      "examples": [
        {
          "description": {
            "zh": "删除会话中的记忆"
          },
          "request": {
            "method": "POST",
            "uri": "http://localhost:8320/api/v1/llm/aiops_service/memory/delete/a1427b34-7709-11ef-837e-06f1e0835fb3",
            "headers": {
              "Content-Type": "application/json",
              "user": "easyops",
              "org": 1234
            },
            "body": "{ }"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"data\": {\n  }\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.aiops_memory.DeleteLlmMemoryWithConversationIdAndKey",
      "name": "DeleteLlmMemoryWithConversationIdAndKey",
      "version": "1.0.0",
      "description": "通过会话id和记忆key删除大模型记忆",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/aiops_service/memory/delete/:conversationId/key"
      },
      "import": [
        "easyops/model/llm/llm_memory"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "conversationId",
            "type": "string",
            "description": "会话id"
          },
          {
            "name": "memKey",
            "type": "string",
            "description": "记忆key"
          }
        ]
      },
      "response": null,
      "examples": [
        {
          "description": {
            "zh": "删除会话中单个记忆信息"
          },
          "request": {
            "method": "POST",
            "uri": "http://localhost:8320/api/v1/llm/aiops_service/memory/delete/a1427b34-7709-11ef-837e-06f1e0835fb3/key",
            "headers": {
              "Content-Type": "application/json",
              "user": "easyops",
              "org": 1234
            },
            "body": "{\n    \"memKey\": \"birthday\",\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"data\": { \n  }\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.aiops_memory.DeleteMemoryEnv",
      "name": "DeleteMemoryEnv",
      "version": "1.0.0",
      "description": "删除大模型记忆的调试环境",
      "endpoint": {
        "method": "DELETE",
        "uri": "/api/v1/llm/aiops_service/memory/env/:_row_id"
      },
      "import": [
        "easyops/model/llm/llm_memory_env"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "ref": "LLMMemoryEnv._row_id"
          }
        ]
      },
      "response": null,
      "examples": [
        {
          "description": {
            "zh": "删除大模型记忆的调试环境"
          },
          "request": {
            "method": "DELETE",
            "uri": "http://localhost:8320/api/v1/llm/aiops_service/memory/env/5daa2e9a6d6ae",
            "headers": {
              "Content-Type": "application/json",
              "user": "easyops",
              "org": 1234
            },
            "body": "{}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"data\": {\n  }\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.aiops_memory.GetLlmMemoryWithConversationId",
      "name": "GetLlmMemoryWithConversationId",
      "version": "1.0.0",
      "description": "通过会话id获取大模型记忆",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/aiops_service/memory/get_with_conversation"
      },
      "import": [
        "easyops/model/llm/llm_memory"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "conversationId",
            "type": "string",
            "description": "会话id"
          }
        ]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "memories",
            "type": "LLMMemory[]",
            "description": "大模型记忆"
          }
        ]
      },
      "examples": [
        {
          "description": {
            "zh": "查询会话中的记忆"
          },
          "request": {
            "method": "POST",
            "uri": "http://localhost:8320/api/v1/llm/aiops_service/memory/get_with_conversation",
            "headers": {
              "Content-Type": "application/json",
              "user": "easyops",
              "org": 1234
            },
            "body": "{\n    \"conversationId\": \"a1427b34-7709-11ef-837e-06f1e0835fb3\"\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"data\": {\n    \"memories\": [\n    {\"conversationId\":\"a1427b34-7709-11ef-837e-06f1e0835fb3\",\"memKey\":\"birthday\",\"description\":\"小明的生日\",\"memValue\":\"1999-01-25\",\"mtime\":\"1999-01-25\"}\n    ]\n  }\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.aiops_memory.GetLlmMemoryWithConversationIdAndKey",
      "name": "GetLlmMemoryWithConversationIdAndKey",
      "version": "1.0.0",
      "description": "通过会话id和记忆key获取大模型记忆",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/aiops_service/memory/get_with_conversation_and_key"
      },
      "import": [
        "easyops/model/llm/llm_memory"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "conversationId",
            "type": "string",
            "description": "会话id"
          },
          {
            "name": "memKey",
            "type": "string",
            "description": "记忆key"
          }
        ]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "memory",
            "type": "LLMMemory",
            "description": "大模型记忆"
          }
        ]
      },
      "examples": [
        {
          "description": {
            "zh": "查询会话中单个记忆信息"
          },
          "request": {
            "method": "POST",
            "uri": "http://localhost:8320/api/v1/llm/aiops_service/memory/get_with_conversation_and_key",
            "headers": {
              "Content-Type": "application/json",
              "user": "easyops",
              "org": 1234
            },
            "body": "{\n    \"conversationId\": \"a1427b34-7709-11ef-837e-06f1e0835fb3\",\n    \"memKey\": \"birthday\",\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"data\": {\n    \"memory\":{\n        \"conversationId\":\"a1427b34-7709-11ef-837e-06f1e0835fb3\",\"memKey\":\"birthday\",\"description\":\"小明的生日\",\"memValue\":\"1999-01-25\",\"mtime\":\"1999-01-25\"\n    }\n  }\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.aiops_memory.SearchMemoryEnv",
      "name": "SearchMemoryEnv",
      "version": "1.0.0",
      "description": "查询大模型记忆的调试环境",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/aiops_service/memory/env/search"
      },
      "import": [
        "easyops/model/llm/llm_memory_env"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "limit",
            "type": "int",
            "description": "返回限制的数量"
          },
          {
            "name": "nextToken",
            "type": "string",
            "description": "上一页，或者下一页的token"
          },
          {
            "name": "query",
            "type": "string",
            "description": "查询关键字，使用字符串模糊匹配"
          }
        ]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "list",
            "type": "LLMMemoryEnv[]",
            "description": "环境 列表"
          },
          {
            "name": "nextToken",
            "type": "string",
            "description": "本次调用返回的查询凭证（Token）。当该返回值为空时，表示该页为末页，不再有后续页。"
          },
          {
            "name": "previousToken",
            "type": "string",
            "description": "上一页token"
          }
        ]
      },
      "examples": [
        {
          "description": {
            "zh": "搜索大模型记忆的调试环境"
          },
          "request": {
            "method": "POST",
            "uri": "http://localhost:8320/api/v1/llm/aiops_service/memory/env/search",
            "headers": {
              "Content-Type": "application/json",
              "user": "easyops",
              "org": 1234
            },
            "body": "{\n    \"limit\": 3000,\n    \"query\": \"google\"\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"data\": {\n      \"list\": [\n        {\"_row_id\": \"xxxxxxx\", \"name\": \"测试2环境\", \"remark\": \"Google搜索专用\"}\n      ]\n  }\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.aiops_memory.UpdateMemoryEnv",
      "name": "UpdateMemoryEnv",
      "version": "1.0.0",
      "description": "更新大模型记忆的调试环境",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/aiops_service/memory/env/:_row_id/update"
      },
      "import": [
        "easyops/model/llm/llm_memory_env"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "ref": "LLMMemoryEnv.*"
          }
        ]
      },
      "response": null,
      "examples": [
        {
          "description": {
            "zh": "更新大模型记忆的调试环境"
          },
          "request": {
            "method": "POST",
            "uri": "http://localhost:8320/api/v1/llm/aiops_service/memory/env/5daa2e9a6d6ae/update",
            "headers": {
              "Content-Type": "application/json",
              "user": "easyops",
              "org": 1234
            },
            "body": "{\n    \"name\": \"测试2环境\",\n    \"remark\": \"Google搜索专用\"\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"data\": {\n  }\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.aiops_memory.UpsertLlmMemoryWithConversationIdAndKey",
      "name": "UpsertLlmMemoryWithConversationIdAndKey",
      "version": "1.0.0",
      "description": "通过会话id和记忆key导入大模型记忆",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/aiops_service/memory/upsert/:conversationId"
      },
      "import": [
        "easyops/model/llm/llm_memory"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "memories",
            "type": "LLMMemory[]",
            "description": "需要更新或插入的记忆"
          },
          {
            "name": "conversationId",
            "type": "string",
            "description": "会话id"
          }
        ]
      },
      "response": null,
      "examples": [
        {
          "description": {
            "zh": "查询会话中单个记忆信息"
          },
          "request": {
            "method": "POST",
            "uri": "http://localhost:8320/api/v1/llm/aiops_service/memory/upsert/a1427b34-7709-11ef-837e-06f1e0835fb3",
            "headers": {
              "Content-Type": "application/json",
              "user": "easyops",
              "org": 1234
            },
            "body": "{\n    \"memories\": [\n      {\"conversationId\":\"a1427b34-7709-11ef-837e-06f1e0835fb3\",\"memKey\":\"birthday\",\"description\":\"小明的生日\",\"memValue\":\"1999-01-25\",\"mtime\":\"1999-01-25\"}\n    ]\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"data\": {\n  }\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.aiops_prompt.LLMDeletePrompt",
      "name": "LLMDeletePrompt",
      "version": "1.0.0",
      "description": "删除提示词",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/aiops_service/prompt/delete"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "instanceId",
            "type": "string",
            "description": "instanceId"
          },
          {
            "name": "agentId",
            "type": "string",
            "description": "agent的id"
          },
          {
            "name": "key",
            "type": "string",
            "description": "对应的key"
          },
          {
            "name": "modelId",
            "type": "string",
            "description": "对应模型的id"
          }
        ]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "nums",
            "type": "int",
            "description": "删除的提示词的数量"
          }
        ]
      },
      "examples": [
        {
          "description": {
            "zh": "删除提示词"
          },
          "request": {
            "method": "POST",
            "uri": "http://ip:port/api/v1/llm/aiops_service/prompt/delete",
            "headers": {
              "Content-Type": "application/json",
              "user": "user",
              "org": 1234
            },
            "body": "{\n  \"instanceId\": \"618611d9dc7a1\"\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"nums\": 1\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.aiops_prompt.LLMGetPrompt",
      "name": "LLMGetPrompt",
      "version": "1.0.0",
      "description": "获取提示词",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/aiops_service/prompt/get"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "agentId",
            "type": "string",
            "description": "agent的id"
          },
          {
            "name": "key",
            "type": "string",
            "description": "对应的key"
          },
          {
            "name": "modelId",
            "type": "string",
            "description": "对应模型的id"
          }
        ],
        "required": [
          "agentId",
          "key"
        ]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "prompt",
            "type": "string",
            "description": "获取到的提示词"
          }
        ]
      },
      "examples": [
        {
          "description": {
            "zh": "获取提示词"
          },
          "request": {
            "method": "POST",
            "uri": "http://ip:port/api/v1/llm/aiops_service/prompt/get",
            "headers": {
              "Content-Type": "application/json",
              "user": "user",
              "org": 1234
            },
            "body": "{\n  \"agentId\": \"agentId\",\n  \"key\": \"key\",\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"prompt\": \"你是xxx\"\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.aiops_prompt.LLMUpsertPrompt",
      "name": "LLMUpsertPrompt",
      "version": "1.0.0",
      "description": "插入或更新提示词",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/aiops_service/prompt/upsert"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "agentId",
            "type": "string",
            "description": "agent的id"
          },
          {
            "name": "key",
            "type": "string",
            "description": "对应的key"
          },
          {
            "name": "modelId",
            "type": "string",
            "description": "对应模型的id"
          },
          {
            "name": "description",
            "type": "string",
            "description": "描述"
          },
          {
            "name": "prompt",
            "type": "string",
            "description": "对应的提示词"
          }
        ],
        "required": [
          "agentId",
          "key",
          "prompt"
        ]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "instanceId",
            "type": "string",
            "description": "插入或更新的实例的instanceId"
          }
        ]
      },
      "examples": [
        {
          "description": {
            "zh": "插入提示词"
          },
          "request": {
            "method": "POST",
            "uri": "http://ip:port/api/v1/llm/aiops_service/prompt/upsert",
            "headers": {
              "Content-Type": "application/json",
              "user": "user",
              "org": 1234
            },
            "body": "{\n  \"agentId\": \"agentId\",\n  \"key\": \"key\",\n  \"prompt\": \"你是xxx\"\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"instanceId\": \"618611d9dc7a1\"\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.aiops_rag.AddSynonymsWords",
      "name": "AddSynonymsWords",
      "version": "1.0.0",
      "description": "增加同义词",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/aiops_rag/add_synonyms_words"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "url",
            "type": "string",
            "description": "url"
          },
          {
            "name": "synonyms",
            "type": "object[]",
            "description": "同义词列表",
            "fields": [
              {
                "name": "words",
                "type": "string[]",
                "description": "同义词"
              }
            ]
          }
        ]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "words",
            "type": "int",
            "description": "导入的同义词数量"
          }
        ]
      },
      "examples": [
        {
          "description": {
            "zh": "导入同义词"
          },
          "request": {
            "method": "POST",
            "uri": "http://localhost:8095/api/v1/llm/aiops_service/add_synonyms_words",
            "headers": {
              "Content-Type": "application/json",
              "user": "easyops",
              "org": 8888
            },
            "body": "{\n  \"url\": \"api/gateway/object_store.object_store.GetObject/api/v1/objectStore/bucket/ai-center/object/abc.txt\",\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"words\": 10\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.aiops_rag.ImportConfluenceEmbedding",
      "name": "ImportConfluenceEmbedding",
      "version": "1.0.0",
      "description": "导入Confluence向量",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/aiops_rag/import_confluence"
      },
      "import": [
        "easyops/model/llm/llm_document"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "namespace",
            "type": "string",
            "description": "知识库id/namespace"
          },
          {
            "name": "docId",
            "type": "string",
            "description": "文档的id,非instanceId"
          },
          {
            "name": "append",
            "type": "bool",
            "description": "是否append"
          },
          {
            "name": "confluenceMeta",
            "type": "object",
            "description": "confluence配置信息",
            "fields": [
              {
                "name": "url",
                "type": "string",
                "description": "confluence终端，如：http://tapd.easyops.local"
              },
              {
                "name": "token",
                "type": "string",
                "description": "认证token"
              },
              {
                "name": "username",
                "type": "string",
                "description": "username"
              },
              {
                "name": "apiKey",
                "type": "string",
                "description": "api_key/password"
              },
              {
                "name": "spaceKey",
                "type": "string",
                "description": "confluence space key"
              },
              {
                "name": "maxPages",
                "type": "int",
                "description": "最大page条目"
              },
              {
                "name": "includeAttachments",
                "type": "bool",
                "description": "是否包含附件"
              }
            ]
          }
        ]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "docs",
            "type": "LLMDocument[]",
            "description": "解析的文档内容"
          }
        ]
      },
      "examples": [
        {
          "description": {
            "zh": "导入confluence文档"
          },
          "request": {
            "method": "POST",
            "uri": "http://localhost:8095/api/v1/llm/aiops_service/import_confluence",
            "headers": {
              "Content-Type": "application/json",
              "user": "easyops",
              "org": 8888
            },
            "body": "{\n  \"namespace\": \"fal_knowledge\",\n  \"docId\": \"doc1\",\n  \"confluence_meta\": {\n    \"url\": \"http://tapd.easyops.local\",\n    \"username\": \"monitor\",\n    \"apiKey\": \"password\",\n    \"spaceKey\": \"platform\",\n    \"maxPages\": 10,\n    \"includeAttachments\": true\n  }\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"data\": {\n    \"docs\": [\n      {\"id\":\"id1\", \"len\": 10},\n      {\"id\":\"id2\", \"len\": 11},\n    ]\n  }\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.aiops_rag.ImportURLEmbedding",
      "name": "ImportURLEmbedding",
      "version": "1.0.0",
      "description": "向向量数据库中导入知识库文档",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/aiops_rag/import_url"
      },
      "import": [
        "easyops/model/llm/llm_document"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "namespace",
            "type": "string",
            "description": "知识库id，同search中的命名空间"
          },
          {
            "name": "docId",
            "type": "string",
            "description": "文档id"
          },
          {
            "name": "url",
            "type": "string",
            "description": "文档链接"
          },
          {
            "name": "openapiUrl",
            "type": "string",
            "description": "优先使用openapiUrl，上面的url目前不生效"
          },
          {
            "name": "docType",
            "type": "string",
            "description": "文档类型，为file或者url"
          },
          {
            "name": "append",
            "type": "bool",
            "description": "是否为append"
          },
          {
            "name": "contentType",
            "type": "string",
            "description": "文档内容类型,QA:问答对,document:普通文档"
          }
        ]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "docs",
            "type": "LLMDocument[]",
            "description": "解析的文档内容"
          }
        ]
      },
      "examples": [
        {
          "description": {
            "zh": "向量化文档"
          },
          "request": {
            "method": "POST",
            "uri": "http://localhost:8095/api/v1/llm/aiops_service/embedding/search_doc",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            },
            "body": "{\n  \"knowledgeId\": \"knowledge_id\",\n  \"docId\": \"document_id\",\n  \"append\": false,\n  \"contentType\":\"document\",\n  \"url\": \"http://sit.easyops.local/next/api/gateway/object_store.object_store.GetObject/api/v1/objectStore/bucket/ai-center/object/long_text_2024-03-15-10-21-151711596669017324400.txt\"\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"data\": {\n    \"docs\": [\n      {\"pageContent\":\"host:主机\"},\n      {\"pageContent\":\"app:应用\"},\n    ]\n  }\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.aiops_rag.UpsertKnowledgeDocument",
      "name": "UpsertKnowledgeDocument",
      "version": "1.0.0",
      "description": "根据knowledge instanceId导入数据到向量库",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/aiops_rag/upsert_knowledge_document"
      },
      "import": [
        "easyops/model/llm/llm_document"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "instanceId",
            "type": "string",
            "description": "knowledge instanceId"
          }
        ]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "docs",
            "type": "int",
            "description": "插入或更新的文档数量"
          }
        ]
      },
      "examples": [
        {
          "description": {
            "zh": "导入向量库"
          },
          "request": {
            "method": "POST",
            "uri": "http://localhost:8095/api/v1/llm/aiops_service/upsert_knowledge_document",
            "headers": {
              "Content-Type": "application/json",
              "user": "easyops",
              "org": 8888
            },
            "body": "{\n  \"instanceId\": \"abc\",\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"docs\": 10\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.aiops_service.LLMEmbeddingDeleteDocs",
      "name": "LLMEmbeddingDeleteDocs",
      "version": "1.0.0",
      "description": "向量数据库中删除知识库中的文档",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/aiops_service/delete_docs"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "knowledgeId",
            "type": "string",
            "description": "知识库id，同search中的命名空间"
          },
          {
            "name": "deleteKnowledge",
            "type": "bool",
            "description": "是否删除整个知识库"
          },
          {
            "name": "ids",
            "type": "string[]",
            "description": "文档所包含的id列表"
          }
        ]
      },
      "response": {
        "type": "map"
      },
      "examples": [
        {
          "description": {
            "zh": "向量化文档"
          },
          "request": {
            "method": "POST",
            "uri": "http://localhost:8095/api/v1/llm/aiops_service/embedding/delete_docs",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            },
            "body": "{\n  \"knowledgeId\": \"knowledge_id\",\n  \"deleteKnowledge\": false,\n  \"ids\": [\"aaa\",\"bbb\"]\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"data\": {\n  }\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.aiops_service.LLMEmbeddingImportUrl",
      "name": "LLMEmbeddingImportUrl",
      "version": "1.0.0",
      "description": "向向量数据库中导入知识库文档",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/aiops_service/import_url"
      },
      "import": [
        "easyops/model/llm/llm_document"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "knowledgeId",
            "type": "string",
            "description": "知识库id，同search中的命名空间"
          },
          {
            "name": "docId",
            "type": "string",
            "description": "文档id"
          },
          {
            "name": "url",
            "type": "string",
            "description": "文档链接"
          },
          {
            "name": "openapiUrl",
            "type": "string",
            "description": "优先使用openapiUrl，上面的url目前不生效"
          },
          {
            "name": "docType",
            "type": "string",
            "description": "文档类型，为file或者url"
          },
          {
            "name": "append",
            "type": "bool",
            "description": "是否为append"
          }
        ]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "docs",
            "type": "LLMDocument[]",
            "description": "解析的文档内容"
          }
        ]
      },
      "examples": [
        {
          "description": {
            "zh": "向量化文档"
          },
          "request": {
            "method": "POST",
            "uri": "http://localhost:8095/api/v1/llm/aiops_service/embedding/search_doc",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            },
            "body": "{\n  \"knowledgeId\": \"knowledge_id\",\n  \"docId\": \"document_id\",\n  \"append\": false,\n  \"url\": \"http://sit.easyops.local/next/api/gateway/object_store.object_store.GetObject/api/v1/objectStore/bucket/ai-center/object/long_text_2024-03-15-10-21-151711596669017324400.txt\"\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"data\": {\n    \"docs\": [\n      {\"pageContent\":\"host:主机\"},\n      {\"pageContent\":\"app:应用\"},\n    ]\n  }\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.aiops_service.LLMEmbeddingSearch",
      "name": "LLMEmbeddingSearch",
      "version": "1.0.0",
      "description": "从向量数据库查询匹配的文档",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/aiops_service/embedding/search_doc"
      },
      "import": [
        "easyops/model/llm/llm_document"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "namespace",
            "type": "string",
            "description": "命名空间"
          },
          {
            "name": "query",
            "type": "string",
            "description": "查询的句子"
          },
          {
            "name": "filter",
            "type": "map",
            "description": "过滤条件"
          },
          {
            "name": "topk",
            "type": "int",
            "description": "返回topk条记录"
          }
        ]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "matchedDocs",
            "type": "LLMDocument[]",
            "description": "相似查询结果"
          }
        ]
      },
      "examples": [
        {
          "description": {
            "zh": "文档向量搜索"
          },
          "request": {
            "method": "POST",
            "uri": "http://localhost:8095/api/v1/llm/aiops_service/embedding/search_doc",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            },
            "body": "{\n    \"namespace\": \"easyops_cmdb123\",\n    \"query\": \"查询负责人为aaa的主机\",\n    \"topk\": 2\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"data\": {\n    \"matchedDocs\": [\n    {\"pageContent\":\"host:主机\",\"metadata\":{\"id\":\"HOST\",\"name\":\"主机\"}},\n    {\"pageContent\":\"app:应用\",\"metadata\":{\"id\":\"APP\",\"name\":\"应用\"}},\n    ]\n  }\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.aiops_service.LLMExecTools",
      "name": "LLMExecTools",
      "version": "1.0.0",
      "description": "大模型执行工具",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/aiops_service/tools/exec"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "toolId",
            "type": "string",
            "description": "工具id"
          },
          {
            "name": "parameters",
            "type": "map",
            "description": "输入的参数"
          },
          {
            "name": "conversationId",
            "type": "string",
            "description": "当前任务上下文的id"
          },
          {
            "name": "agentId",
            "type": "string",
            "description": "在多agent场景，指定使用哪个agent"
          },
          {
            "name": "callId",
            "type": "string",
            "description": "执行工具的过程id"
          }
        ],
        "required": [
          "toolId"
        ]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "data",
            "type": "value",
            "description": "执行工具的结果"
          },
          {
            "name": "callId",
            "type": "string",
            "description": "执行工具的过程id"
          }
        ]
      },
      "examples": [
        {
          "description": {
            "zh": "执行大模型工具tools"
          },
          "request": {
            "method": "POST",
            "uri": "http://localhost:port/api/v1/llm/aiops_service/tools/exec",
            "headers": {
              "Content-Type": "application/json",
              "user": "user",
              "org": 1234
            },
            "body": "{\n    \"conversationId\": \"xxxxx\",\n    \"toolId\": \"search-weather\",\n    \"parameters\": {\n      \"city\": \"深圳\"\n    }\n}"
          },
          "response": {
            "status_code": 200,
            "body": "{\n  \"data\": {\n    \"xxx\":\"xxx\"\n  }\n  \"callId\": \"xxxx\"\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.aiops_service.ExportAgents",
      "name": "ExportAgents",
      "version": "1.0.0",
      "description": "导出agent",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/aiops_service/agents/export"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "agents",
            "type": "string[]",
            "description": "需要导出的agent id"
          }
        ],
        "required": [
          "agents"
        ]
      },
      "response": {
        "type": "file"
      },
      "examples": [
        {
          "description": {
            "zh": "导出agent"
          },
          "request": {
            "method": "POST",
            "uri": "http://localhost:port/api/v1/llm/aiops_service/agents/export",
            "headers": {
              "Content-Type": "application/json",
              "user": "user",
              "org": 1234
            },
            "body": "{\n  \"agents\": [\"agent1\", \"agent2\"]\n}"
          },
          "response": {
            "status_code": 200,
            "body": "二进制文件流"
          }
        }
      ]
    },
    {
      "contract": "llm.aiops_service.ExportConversation",
      "name": "ExportConversation",
      "version": "1.0.0",
      "description": "导出会话历史",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/aiops_service/conversation/export"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "start_time",
            "type": "int64",
            "description": "开始时间"
          },
          {
            "name": "end_time",
            "type": "int64",
            "description": "结束时间"
          },
          {
            "name": "agent_id",
            "type": "string",
            "description": "指定智能体"
          },
          {
            "name": "robot_id",
            "type": "string",
            "description": "指定助手"
          },
          {
            "name": "is_like",
            "type": "bool",
            "description": "is_like"
          },
          {
            "name": "is_solve",
            "type": "bool",
            "description": "is_solve"
          },
          {
            "name": "user_name",
            "type": "string",
            "description": "按用户搜索"
          }
        ],
        "required": [
          "start_time",
          "end_time"
        ]
      },
      "response": {
        "type": "file"
      },
      "examples": [
        {
          "description": {
            "zh": "导出会话历史"
          },
          "request": {
            "method": "POST",
            "uri": "http://localhost:port/api/v1/llm/aiops_service/conversation/export",
            "headers": {
              "Content-Type": "application/json",
              "user": "user",
              "org": 1234
            },
            "body": "{\n  \"start_time\": 1725941620274,\n  \"end_time\": 1725941627274\n}"
          },
          "response": {
            "status_code": 200,
            "body": "二进制文件流"
          }
        }
      ]
    },
    {
      "contract": "llm.aiops_service.ExportRobots",
      "name": "ExportRobots",
      "version": "1.0.0",
      "description": "导出robots",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/aiops_service/robots/export"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "robots",
            "type": "string[]",
            "description": "需要导出的robot id"
          }
        ],
        "required": [
          "robots"
        ]
      },
      "response": {
        "type": "file"
      },
      "examples": [
        {
          "description": {
            "zh": "导出robots"
          },
          "request": {
            "method": "POST",
            "uri": "http://localhost:port/api/v1/llm/aiops_service/robots/export",
            "headers": {
              "Content-Type": "application/json",
              "user": "user",
              "org": 1234
            },
            "body": "{\n  \"robots\": [\"robot1\", \"robot2\"]\n}"
          },
          "response": {
            "status_code": 200,
            "body": "二进制文件流"
          }
        }
      ]
    },
    {
      "contract": "llm.aiops_service.ExportTools",
      "name": "ExportTools",
      "version": "1.0.0",
      "description": "导出工具",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/aiops_service/tools/export"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "tools",
            "type": "string[]",
            "description": "需要导出的tool id"
          }
        ],
        "required": [
          "tools"
        ]
      },
      "response": {
        "type": "file"
      },
      "examples": [
        {
          "description": {
            "zh": "导出工具"
          },
          "request": {
            "method": "POST",
            "uri": "http://localhost:port/api/v1/llm/aiops_service/tools/export",
            "headers": {
              "Content-Type": "application/json",
              "user": "user",
              "org": 1234
            },
            "body": "{\n  \"tools\": [\"tool1\", \"tool2\"]\n}"
          },
          "response": {
            "status_code": 200,
            "body": "二进制文件流"
          }
        }
      ]
    },
    {
      "contract": "llm.aiops_service.ImportAgents",
      "name": "ImportAgents",
      "version": "1.0.0",
      "description": "导入agent",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/aiops_service/agents/import"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "agents",
            "type": "file",
            "description": "需要导入的文件"
          },
          {
            "name": "update",
            "type": "bool",
            "description": "是否覆盖原来的"
          }
        ],
        "required": [
          "agents"
        ]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "agents",
            "type": "int",
            "description": "导入成功的agent数量"
          }
        ]
      },
      "examples": [
        {
          "description": {
            "zh": "导入agent"
          },
          "request": {
            "method": "POST",
            "uri": "http://localhost:port/api/v1/llm/aiops_service/agents/import",
            "headers": {
              "Content-Type": "multipart/form-data",
              "user": "user",
              "org": 1234
            },
            "body": "\"file\": 导入文件流"
          },
          "response": {
            "status_code": 200,
            "body": "{\n  \"agents\": 1\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.aiops_service.ImportConfluenceEmbedding",
      "name": "ImportConfluenceEmbedding",
      "version": "1.0.0",
      "description": "导入Confluence向量",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/aiops_service/import_confluence"
      },
      "import": [
        "easyops/model/llm/llm_document"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "namespace",
            "type": "string",
            "description": "知识库id/namespace"
          },
          {
            "name": "doc_id",
            "type": "string",
            "description": "文档的id,非instanceId"
          },
          {
            "name": "append",
            "type": "bool",
            "description": "是否append"
          },
          {
            "name": "confluence_meta",
            "type": "object",
            "description": "confluence配置信息",
            "fields": [
              {
                "name": "url",
                "type": "string",
                "description": "confluence终端，如：http://tapd.easyops.local"
              },
              {
                "name": "token",
                "type": "string",
                "description": "认证token"
              },
              {
                "name": "username",
                "type": "string",
                "description": "username"
              },
              {
                "name": "api_key",
                "type": "string",
                "description": "api_key/password"
              },
              {
                "name": "space_key",
                "type": "string",
                "description": "confluence space key"
              },
              {
                "name": "max_pages",
                "type": "int",
                "description": "最大page条目"
              },
              {
                "name": "include_attachments",
                "type": "bool",
                "description": "是否包含附件"
              }
            ]
          }
        ]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "docs",
            "type": "LLMDocument[]",
            "description": "解析的文档内容"
          }
        ]
      },
      "examples": [
        {
          "description": {
            "zh": "导入confluence文档"
          },
          "request": {
            "method": "POST",
            "uri": "http://localhost:8095/api/v1/llm/aiops_service/import_confluence",
            "headers": {
              "Content-Type": "application/json",
              "user": "easyops",
              "org": 8888
            },
            "body": "{\n  \"namespace\": \"fal_knowledge\",\n  \"doc_id\": \"doc1\",\n  \"confluence_meta\": {\n    \"url\": \"http://tapd.easyops.local\",\n    \"username\": \"monitor\",\n    \"api_key\": \"password\",\n    \"space_key\": \"platform\",\n    \"max_pages\": 10,\n    \"include_attachments\": true\n  }\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"data\": {\n    \"docs\": [\n      {\"id\":\"id1\", \"len\": 10},\n      {\"id\":\"id2\", \"len\": 11},\n    ]\n  }\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.aiops_service.ImportDocumentEmbedding",
      "name": "ImportDocumentEmbedding",
      "version": "1.0.2",
      "description": "导入document",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/aiops_service/import_doc"
      },
      "import": [
        "easyops/model/llm/llm_document"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "namespace",
            "type": "string",
            "description": "导入的namespace"
          },
          {
            "name": "doc_id",
            "type": "string",
            "description": "doc id"
          },
          {
            "name": "docList",
            "type": "object[]",
            "description": "导入的document",
            "fields": [
              {
                "name": "page_content",
                "type": "string",
                "description": "内容"
              },
              {
                "name": "metadata",
                "type": "map",
                "description": "metadata"
              }
            ]
          },
          {
            "name": "append",
            "type": "bool",
            "description": "是否append"
          }
        ]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "docs",
            "type": "LLMDocument[]",
            "description": "解析的文档内容"
          }
        ]
      },
      "examples": [
        {
          "description": {
            "zh": "直接导入document"
          },
          "request": {
            "method": "POST",
            "uri": "http://localhost:8095/api/v1/llm/aiops_service/import_doc",
            "headers": {
              "Content-Type": "application/json",
              "user": "easyops",
              "org": 8888
            },
            "body": "{\n  \"namespace\": \"fal_knowledge\",\n  \"doc_id\": \"doc1\",\n  “docList”: [\n    {\"page_content\":\"1\", metadata:{}}\n  ]\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"data\": {\n    \"docs\": [\n      {\"id\":\"id1\", \"len\": 10},\n      {\"id\":\"id2\", \"len\": 11},\n    ]\n  }\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.aiops_service.ImportRobots",
      "name": "ImportRobots",
      "version": "1.0.0",
      "description": "导入robots",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/aiops_service/robots/import"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "robots",
            "type": "file",
            "description": "需要导入的文件"
          },
          {
            "name": "update",
            "type": "bool",
            "description": "是否覆盖原来的"
          }
        ],
        "required": [
          "robots"
        ]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "robots",
            "type": "int",
            "description": "导入成功的robot数量"
          }
        ]
      },
      "examples": [
        {
          "description": {
            "zh": "导入robot"
          },
          "request": {
            "method": "POST",
            "uri": "http://localhost:port/api/v1/llm/aiops_service/robots/import",
            "headers": {
              "Content-Type": "multipart/form-data",
              "user": "user",
              "org": 1234
            },
            "body": "\"robots\": 导入文件流 \"update\": true"
          },
          "response": {
            "status_code": 200,
            "body": "{\n  \"robots\": 1\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.aiops_service.ImportTools",
      "name": "ImportTools",
      "version": "1.0.0",
      "description": "导入tools",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/aiops_service/tools/import"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "tools",
            "type": "file",
            "description": "需要导入的文件"
          },
          {
            "name": "update",
            "type": "bool",
            "description": "是否覆盖原来的"
          }
        ],
        "required": [
          "tools"
        ]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "tools",
            "type": "int",
            "description": "导入成功的agent数量"
          }
        ]
      },
      "examples": [
        {
          "description": {
            "zh": "导入tools"
          },
          "request": {
            "method": "POST",
            "uri": "http://localhost:port/api/v1/llm/aiops_service/tools/import",
            "headers": {
              "Content-Type": "multipart/form-data",
              "user": "user",
              "org": 1234
            },
            "body": "\"tools\": 导入文件流 \"update\": true"
          },
          "response": {
            "status_code": 200,
            "body": "{\n  \"tools\": 1\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.aiops_service.LLMAgentChat",
      "name": "LLMAgentChat",
      "version": "1.2.0",
      "description": "大模型agent对话，不会记录会话历史",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/aiops_service/agent/chat"
      },
      "import": [
        "easyops/model/aiops_service/llm_chat_message",
        "easyops/model/aiops_service/llm_chat_agent_task_response"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "inputTemplate",
            "type": "string",
            "description": "任务需求, 支持模板引擎"
          },
          {
            "name": "inputVariables",
            "type": "map",
            "description": "模板所需要的数据"
          },
          {
            "name": "systemTemplate",
            "type": "string",
            "description": "system角色的提示词模板"
          },
          {
            "name": "systemVariables",
            "type": "map",
            "description": "system模板所需要的数据"
          },
          {
            "name": "config",
            "type": "map",
            "description": "任务配置"
          },
          {
            "name": "conversationId",
            "type": "string",
            "description": "当前任务上下文的id"
          },
          {
            "name": "agentId",
            "type": "string",
            "description": "在多agent场景，指定使用哪个agent"
          },
          {
            "name": "taskId",
            "type": "string",
            "description": "当前任务Id"
          },
          {
            "name": "formData",
            "type": "value",
            "description": "已经提取的表单数据"
          },
          {
            "name": "outputType",
            "type": "string",
            "description": "输出格式，默认json"
          },
          {
            "name": "stream",
            "type": "bool",
            "description": "是否流式返回"
          },
          {
            "name": "historyMessages",
            "type": "LLMChatMessage[]",
            "description": "历史会话消息，适用支持多轮会话的agent"
          },
          {
            "name": "images",
            "type": "string[]",
            "description": "图片的url，支持多个图片"
          }
        ]
      },
      "response": {
        "type": "object",
        "description": "接口返回,有两种格式,流式返回为delta, 非流式返回为message\n",
        "fields": [
          {
            "name": "data",
            "type": "value",
            "description": "提取返回的数据"
          },
          {
            "name": "debug_resp",
            "type": "string",
            "description": "调试时大模型返回值"
          },
          {
            "name": "errorOutput",
            "type": "string",
            "description": "如果解析不到正确的数据格式，则将大模型返回的数据塞到这里"
          },
          {
            "ref": "LlmChatAgentTaskResponse.*"
          }
        ]
      },
      "examples": [
        {
          "description": {
            "zh": "大模型聊天接口"
          },
          "request": {
            "method": "POST",
            "uri": "http://localhost:8095/api/v1/llm/aiops_service/agent/chat",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            },
            "body": "{\n    \"inputTemplate\": \"你好啊\",\n    \"agentId\": \"general-helper\"\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"created\": 1703487403,\n  \"type\": \"TEXT\",\n  \"taskId\": \"8239375684858666781\",\n  \"message\": {\n    \"role\":\"assistant\",\n    \"content\":\"有什么可以帮到你\"\n  }\n}"
          }
        },
        {
          "description": {
            "zh": "调用智谱glm-4模型，流式返回"
          },
          "request": {
            "method": "POST",
            "uri": "http://ip:port/api/v1/llm/aiops_service/chat_service",
            "headers": {
              "Content-Type": "application/json",
              "Org": 8888,
              "User": "easyops"
            },
            "body": "{\n  \"inputTemplate\": \"你好啊\",\n  \"agentId\": \"general-helper\",\n  \"stream\": true\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "text/event-stream"
            },
            "body": "data: {\"created\":1703487403,\"type\":\"TEXT\",\"taskId\":\"8239375684858666781\",\"delta\":{\"role\":\"assistant\",\"content\":\"有什么可以\"}}\\n\\n data: {\"created\":1703487404,\"type\":\"TEXT\",\"taskId\":\"8239375684858666781\",\"delta\":{\"role\":\"assistant\",\"content\":\"帮到你\"}}\\n\\n data: [DONE]"
          }
        }
      ]
    },
    {
      "contract": "llm.aiops_service.LLMChatSelectAgent",
      "name": "LLMChatSelectAgent",
      "version": "1.1.0",
      "description": "大模型选择处理的agent",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/aiops_service/agent/select"
      },
      "import": [
        "easyops/model/aiops_service/llm_chat_select_agent_request",
        "easyops/model/aiops_service/llm_chat_select_agent_response"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "ref": "LlmChatSelectAgentRequest.*"
          }
        ]
      },
      "response": {
        "type": "object",
        "description": "接口返回选择agent的结果，有breakMsg时，需要中断",
        "fields": [
          {
            "ref": "LlmChatSelectAgentResponse.*"
          }
        ]
      },
      "examples": [
        {
          "description": {
            "zh": "大模型代理聊天接口,选择agent"
          },
          "request": {
            "method": "POST",
            "uri": "http://localhost:8095/api/v1/llm/aiops_service/chat/completions",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            },
            "body": "{\n    \"input\": \"你好啊\"\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"created\": 1703487403000,\n  \"conversationId\": \"adfa7fde-3773-4d43-a6ba-bedf04d4c2fe\",\n  \"agentId\":\"no_agent\"\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.aiops_service.LLMChatService",
      "name": "LLMChatService",
      "version": "1.0.0",
      "description": "大模型聊天接口",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/aiops_service/chat_service"
      },
      "import": [
        "easyops/model/aiops_service/llm_chat_request",
        "easyops/model/aiops_service/llm_chat_response"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "ref": "LLMChatRequest.*"
          }
        ],
        "default": {
          "LLMChatResponse.temperature": 0.1,
          "LLMChatResponse.stream": false
        }
      },
      "response": {
        "type": "object",
        "description": "接口返回,有两种格式,流式返回为sseDataList:[{\"role\":\"assistant\",\"content\":\"abc\"}],非流式返回为LLMChatResponse",
        "fields": [
          {
            "ref": "LLMChatResponse.*"
          },
          {
            "name": "sseDataList",
            "type": "value[]",
            "description": "流式数据列表"
          }
        ]
      },
      "examples": [
        {
          "description": {
            "zh": "大模型聊天接口"
          },
          "request": {
            "method": "POST",
            "uri": "http://localhost:8095/api/v1/llm/aiops_service/chat_service",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            },
            "body": "{\n    \"model\": \"glm-4\",\n    \"messages\": [\n      {\"role\": \"user\", \"content\": \"作为一名营销专家，请为我的产品创作一个吸引人的slogan\"},\n      {\"role\": \"assistant\", \"content\": \"当然，为了创作一个吸引人的slogan，请告诉我一些关于您产品的信息\"},\n      {\"role\": \"user\", \"content\": \"智谱AI开放平台\"},\n      {\"role\": \"assistant\", \"content\": \"智启未来，谱绘无限一智谱AI，让创新触手可及!\"},\n      {\"role\": \"user\", \"content\": \"创造一个更精准、吸引人的slogan\"}\n    ]\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"created\": 1703487403,\n  \"id\": \"8239375684858666781\",\n  \"model\": \"glm-4\",\n  \"request_id\": \"8239375684858666781\",\n  \"choices\": [\n    {\n      \"finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"content\": \"智绘蓝图，AI驱动 —— 智谱AI，让每一刻创新成为可能。\",\n        \"role\": \"assistant\"\n      }\n    }\n  ],\n  \"usage\": {\n    \"completion_tokens\": 217,\n    \"prompt_tokens\": 31,\n    \"total_tokens\": 248\n  }\n}"
          }
        },
        {
          "description": {
            "zh": "调用智谱glm-4模型，流式返回"
          },
          "request": {
            "method": "POST",
            "uri": "http://ip:port/api/v1/llm/aiops_service/chat_service",
            "headers": {
              "Content-Type": "application/json",
              "Org": 8888,
              "User": "easyops"
            },
            "body": "{\n  \"message\": [\n    {\"role\": \"user\", \"content\": \"1+1等于多少\"}\n  ],\n  \"stream\": true,\n  \"model\": \"glm-4\"\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "text/event-stream"
            },
            "body": "data:{\"role\":\"assistant\", \"content\":\"等于\"}\\n\\n data:{\"role\":\"assistant\", \"content\":\"2\"}\\n\\n"
          }
        }
      ]
    },
    {
      "contract": "llm.aiops_service.LLMCreateConversation",
      "name": "LLMCreateConversation",
      "version": "1.0.0",
      "description": "大模型新建会话",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/aiops_service/conversation/create"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "sessionId",
            "type": "string",
            "description": "sessionId"
          },
          {
            "name": "conversationTitle",
            "type": "string",
            "description": "会话标题"
          },
          {
            "name": "robotId",
            "type": "string",
            "description": "助手id"
          }
        ]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "conversationId",
            "type": "string",
            "description": "会话ID"
          }
        ]
      },
      "examples": [
        {
          "description": {
            "zh": "大模型新建会话"
          },
          "request": {
            "method": "POST",
            "uri": "http://localhost:8095/api/v1/llm/aiops_service/conversation/create",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            },
            "body": "{\n    \"conversationTitle\": \"你好啊\",\n    \"sessionId\": \"xxxx\"\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"conversationId\": \"adfa7fde-3773-4d43-a6ba-bedf04d4c2fe\",\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.aiops_service.LLMRobotChat",
      "name": "LLMRobotChat",
      "version": "1.2.0",
      "description": "大模型助手聊天",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/aiops_service/robot/chat"
      },
      "import": [
        "easyops/model/aiops_service/llm_chat_agent_task_request",
        "easyops/model/aiops_service/llm_chat_agent_task_response"
      ],
      "request": {
        "type": "LlmChatAgentTaskRequest"
      },
      "response": {
        "type": "LlmChatAgentTaskResponse",
        "description": "接口返回,有两种格式,流式返回为delta, 非流式返回为message\n"
      },
      "examples": [
        {
          "description": {
            "zh": "大模型聊天接口"
          },
          "request": {
            "method": "POST",
            "uri": "http://localhost:8095/api/v1/llm/aiops_service/chat_service",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            },
            "body": "{\n    \"input\": \"你好啊\",\n    \"robotId\": \"general-helper\"\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"created\": 1703487403,\n  \"type\": \"TEXT\",\n  \"taskId\": \"8239375684858666781\",\n  \"message\": {\n    \"role\":\"assistant\",\n    \"content\":\"有什么可以帮到你\"\n  }\n}"
          }
        },
        {
          "description": {
            "zh": "调用智谱glm-4模型，流式返回"
          },
          "request": {
            "method": "POST",
            "uri": "http://ip:port/api/v1/llm/aiops_service/chat_service",
            "headers": {
              "Content-Type": "application/json",
              "Org": 8888,
              "User": "easyops"
            },
            "body": "{\n  \"input\": \"你好啊\",\n  \"robotId\": \"general-helper\",\n  \"stream\": true\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "text/event-stream"
            },
            "body": "data: {\"created\":1703487403,\"type\":\"TEXT\",\"taskId\":\"8239375684858666781\",\"delta\":{\"role\":\"assistant\",\"content\":\"有什么可以\"}}\\n\\n data: {\"created\":1703487404,\"type\":\"TEXT\",\"taskId\":\"8239375684858666781\",\"delta\":{\"role\":\"assistant\",\"content\":\"帮到你\"}}\\n\\n data: [DONE]"
          }
        }
      ]
    },
    {
      "contract": "llm.aiops_service.LLMStreamChatService",
      "name": "LLMStreamChatService",
      "version": "1.0.0",
      "description": "大模型聊天流式接口",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/aiops_service/stream_chat_service"
      },
      "import": [
        "easyops/model/aiops_service/llm_chat_request"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "ref": "LLMChatRequest.*"
          }
        ]
      },
      "response": {
        "wrapper": false,
        "type": "object",
        "fields": [
          {
            "name": "data",
            "type": "value[]",
            "description": "流式接口，返回的是一个数组。fb会做后置校验，这里最好先声明为value格式且name为data。这个返回的为：{\"role\":\"assistant\",\"content\":\"土\"}"
          }
        ]
      },
      "examples": [
        {
          "description": {
            "zh": "大模型聊天接口"
          },
          "request": {
            "method": "POST",
            "uri": "http://localhost:8095/api/v1/llm/aiops_service/chat_service",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            },
            "body": "{\n    \"model\": \"glm-4\",\n    \"messages\": [\n      {\"role\": \"user\", \"content\": \"作为一名营销专家，请为我的产品创作一个吸引人的slogan\"},\n      {\"role\": \"assistant\", \"content\": \"当然，为了创作一个吸引人的slogan，请告诉我一些关于您产品的信息\"},\n      {\"role\": \"user\", \"content\": \"智谱AI开放平台\"},\n      {\"role\": \"assistant\", \"content\": \"智启未来，谱绘无限一智谱AI，让创新触手可及!\"},\n      {\"role\": \"user\", \"content\": \"创造一个更精准、吸引人的slogan\"}\n    ]\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "[\n  {\n    \"content\": \"智绘蓝图，AI驱动 —— 智谱AI，让每一刻创新成为可能。\",\n    \"role\": \"assistant\"\n  },\n  {\n    \"content\": \"智绘蓝图，AI驱动 —— 智谱AI，让每一刻创新成为可能。\",\n    \"role\": \"assistant\"\n  }\n]"
          }
        }
      ]
    },
    {
      "contract": "llm.aiops_tools.ExecLlmTools",
      "name": "ExecLlmTools",
      "version": "1.0.0",
      "description": "执行大模型工具，非MCP协议的一部分",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/tools/exec"
      },
      "request": {
        "fields": [
          {
            "description": "要执行的工具名称，也是id",
            "name": "name",
            "type": "string"
          },
          {
            "description": "执行工具的参数",
            "name": "arguments",
            "type": "map"
          },
          {
            "description": "执行工具的配置，例如agentId，\"agentId\":\"cmdb_search_agent\"",
            "name": "config",
            "type": "map"
          }
        ],
        "required": [
          "name"
        ],
        "type": "object"
      },
      "response": {
        "default": {},
        "fields": [
          {
            "description": "执行结果，返回类型，目前只支持text",
            "name": "type",
            "type": "string"
          },
          {
            "description": "执行工具的结果",
            "name": "result",
            "type": "value"
          }
        ],
        "type": "object"
      },
      "examples": [
        {
          "description": {
            "zh": "执行大模型工具"
          },
          "request": {
            "method": "POST",
            "uri": "http://localhost:8320/api/v1/llm/tools/exec",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            },
            "body": "{\n    \"name\": \"web_search\",\n    \"arguments\": {\n      \"query\": \"什么是MCP\"\n    },\n    \"config\":{\n      \"agentId\": \"cmdb_search_agent\",\n      \"conversationId\": \"xxxxxxx\",\n    }\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n   \"code\": 0,\n   \"error\": \"\",\n   \"data\": {\n    \"type\": \"text\",\n    \"result\": \"MCP 是一种开放协议\", \"content\":\"什么是MCP？ MCP 是一种开放协议，通过标准化的服务器实现，使AI 模型能够安全地与本地和远程资源进行交互。 此列表重点关注可用于生产和实验性的MCP 服务器，这些服务器通过文件访问、数据库连接、API 集成和其他上下文服务来扩展AI 功能。\"\n  }\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.aiops_tools.SummaryQuestionV2",
      "name": "SummaryQuestionV2",
      "version": "1.0.0",
      "description": "根据模板与大模型对话，总结用户问题",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/tools/summary_question_v2"
      },
      "import": [
        "easyops/model/aiops_service/llm_chat_message",
        "easyops/model/aiops_service/llm_chat_agent_task_response"
      ],
      "request": {
        "fields": [
          {
            "description": "总结提示词模版引擎，为空时，使用默认模板",
            "name": "template",
            "type": "string"
          },
          {
            "description": "模板引擎的数据，默认会注入 input 变量",
            "name": "variables",
            "type": "map"
          },
          {
            "description": "大模型id",
            "name": "model",
            "type": "string"
          },
          {
            "description": "历史对话消息",
            "name": "historyMessages",
            "type": "LLMChatMessage[]"
          },
          {
            "description": "输入的问题",
            "name": "input",
            "type": "string"
          },
          {
            "description": "system角色的提示词模板",
            "name": "systemTemplate",
            "type": "string"
          },
          {
            "description": "system模板所需要的数据",
            "name": "systemVariables",
            "type": "map"
          },
          {
            "description": "输入的图片url",
            "name": "images",
            "type": "string[]"
          }
        ],
        "required": [],
        "type": "object"
      },
      "response": {
        "default": {},
        "fields": [
          {
            "description": "总结后的新问题",
            "name": "data",
            "type": "string"
          }
        ],
        "type": "object"
      },
      "examples": [
        {
          "description": {
            "zh": "根据模板与大模型对话，总结用户问题"
          },
          "request": {
            "method": "POST",
            "uri": "http://localhost:8320/api/v1/llm/tools/summary_question_v2",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            },
            "body": "{\n    \"input\": \"你好啊\",\n    \"outputType\": \"string\"\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"data\": \"你好啊\",\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.aiops_tools.TemplateLlmChatV2",
      "name": "TemplateLlmChatV2",
      "version": "1.0.0",
      "description": "根据模板与大模型对话，返回json",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/tools/template_llm_chat_v2"
      },
      "import": [
        "easyops/model/aiops_service/llm_chat_message",
        "easyops/model/aiops_service/llm_chat_agent_task_response"
      ],
      "request": {
        "default": {
          "temperature": 0.1
        },
        "fields": [
          {
            "description": "模板，为空时，不使用默认引擎",
            "name": "template",
            "type": "string"
          },
          {
            "description": "模板引擎的数据",
            "name": "variables",
            "type": "map"
          },
          {
            "description": "大模型id",
            "name": "model",
            "type": "string"
          },
          {
            "description": "历史对话消息",
            "name": "historyMessages",
            "type": "LLMChatMessage[]"
          },
          {
            "description": "输入对话,模板为空时才生效",
            "name": "input",
            "type": "string"
          },
          {
            "description": "输出格式，默认json",
            "name": "outputType",
            "type": "string"
          },
          {
            "description": "取值范围是：(0.0, 1.0]，不能等于 0，默认值为 0.1，值越大，会使输出更随机，更具创造性；值越小，输出会更加稳定或确定",
            "name": "temperature",
            "type": "float"
          },
          {
            "description": "是否是调试模式，为true时，返回debug_resp",
            "name": "debug",
            "type": "bool"
          },
          {
            "description": "是否是流式",
            "name": "stream",
            "type": "bool"
          },
          {
            "description": "system角色的提示词模板",
            "name": "systemTemplate",
            "type": "string"
          },
          {
            "description": "system模板所需要的数据",
            "name": "systemVariables",
            "type": "map"
          },
          {
            "description": "任务id",
            "name": "taskId",
            "type": "string"
          },
          {
            "description": "输入的图片url",
            "name": "images",
            "type": "string[]"
          },
          {
            "description": "请求最大 token 数",
            "name": "maxTokens",
            "type": "int"
          }
        ],
        "required": [],
        "type": "object"
      },
      "response": {
        "default": {},
        "wrapper": false,
        "fields": [
          {
            "ref": "LlmChatAgentTaskResponse.*"
          },
          {
            "description": "提取返回的数据",
            "name": "data",
            "type": "value"
          },
          {
            "description": "推理模型的推理内容",
            "name": "reasoning_content",
            "type": "string"
          },
          {
            "description": "调试时大模型返回值",
            "name": "debug_resp",
            "type": "string"
          },
          {
            "description": "如果解析不到正确的数据格式，则将大模型返回的数据塞到这里",
            "name": "errorOutput",
            "type": "string"
          }
        ],
        "type": "object"
      },
      "examples": [
        {
          "description": {
            "zh": "根据模板与大模型对话，返回json"
          },
          "request": {
            "method": "POST",
            "uri": "http://localhost:8320/api/v1/llm/tools/template_llm_chat_v2",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            },
            "body": "{\n    \"input\": \"你好啊\",\n    \"outputType\": \"string\"\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"data\": \"有什么可以帮你\",\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.elevo.BindProjectAiEmployees",
      "name": "BindProjectAiEmployees",
      "version": "1.0.0",
      "description": "绑定项目与数字人关系",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/elevo/projects/:projectInstanceId/bind-ai-employees"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "projectInstanceId",
            "type": "string",
            "description": "项目实例ID"
          },
          {
            "name": "aiEmployeeInstanceIds",
            "type": "string[]",
            "description": "数字人实例ID列表"
          }
        ],
        "required": [
          "projectInstanceId",
          "aiEmployeeInstanceIds"
        ]
      },
      "response": null,
      "examples": [
        {
          "description": {
            "zh": "绑定项目与数字人关系"
          },
          "request": {
            "method": "POST",
            "uri": "http://ip:port/api/v1/elevo/projects/project_123/bind-ai-employees",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            },
            "body": "{\n  \"projectInstanceId\": \"project_123\",\n  \"aiEmployeeInstanceIds\": [\"emp_001\", \"emp_002\", \"emp_003\"]\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"message\": \"success\"\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.elevo.BindProjectUsers",
      "name": "BindProjectUsers",
      "version": "1.0.0",
      "description": "绑定项目与用户的关系",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/elevo/project-users/:projectInstanceId/bind-users"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "projectInstanceId",
            "type": "string",
            "description": "项目实例ID"
          },
          {
            "name": "users",
            "type": "object[]",
            "description": "用户列表",
            "fields": [
              {
                "name": "instanceId",
                "type": "string",
                "description": "用户的instanceId"
              }
            ]
          }
        ],
        "required": [
          "projectInstanceId",
          "users"
        ]
      },
      "response": null,
      "examples": [
        {
          "description": {
            "zh": "绑定项目与用户的关系"
          },
          "request": {
            "method": "POST",
            "uri": "http://ip:port/api/v1/elevo/projects/project_123/bind-users",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            },
            "body": "{\n  \"projectInstanceId\": \"project_123\",\n  \"users\": [\n    {\"instanceId\": \"j523532df\"}\n  ]\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"message\": \"success\"\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.elevo.CreateElevoAgent",
      "name": "CreateElevoAgent",
      "version": "1.0.0",
      "description": "创建elevo智能体",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/elevo/agents"
      },
      "import": [
        "easyops/model/llm/elevo_agent"
      ],
      "request": {
        "type": "ElevoAgent"
      },
      "response": {
        "type": "ElevoAgent"
      },
      "examples": [
        {
          "description": {
            "zh": "创建elevo智能体"
          },
          "request": {
            "method": "POST",
            "uri": "http://ip:port/api/v1/elevo/agents",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            },
            "body": "{\n    \"agentId\": \"agent_123\",\n    \"name\": \"智能助手Agent\",\n    \"description\": \"用于智能助手的基础Agent\",\n    \"state\": \"active\",\n    \"capabilities\": [\"对话\", \"分析\", \"搜索\"],\n    \"mcpServers\": [\"mcp_server_1\", \"mcp_server_2\"],\n    \"planTool\": \"plan_tool_id\",\n    \"modelConfig\": {\n        \"defaultModel\": \"gpt-4\",\n        \"temperature\": 0.7,\n        \"maxTokens\": 4000,\n        \"baseSystemPrompt\": \"你是一个智能助手Agent\"\n    }\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"message\": \"success\",\n  \"data\": {\n    \"instanceId\": \"cmdb_instance_789\",\n    \"agentId\": \"agent_123\",\n    \"name\": \"智能助手Agent\",\n    \"description\": \"用于智能助手的基础Agent\",\n    \"state\": \"active\",\n    \"capabilities\": [\"对话\", \"分析\", \"搜索\"],\n    \"mcpServers\": [\"mcp_server_1\", \"mcp_server_2\"],\n    \"planTool\": \"plan_tool_id\",\n    \"modelConfig\": {\n        \"defaultModel\": \"gpt-4\",\n        \"temperature\": 0.7,\n        \"maxTokens\": 4000,\n        \"baseSystemPrompt\": \"你是一个智能助手Agent\"\n    },\n    \"creator\": \"user123\",\n    \"ctime\": \"2024-01-01T00:00:00Z\",\n    \"mtime\": \"2024-01-01T00:00:00Z\"\n  }\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.elevo.CreateElevoAiEmployee",
      "name": "CreateElevoAiEmployee",
      "version": "1.0.0",
      "description": "创建elevo数字人",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/elevo/ai-employees"
      },
      "import": [
        "easyops/model/llm/elevo_ai_employee"
      ],
      "request": {
        "type": "ElevoAiEmployee"
      },
      "response": {
        "type": "ElevoAiEmployee"
      },
      "examples": [
        {
          "description": {
            "zh": "创建elevo数字人"
          },
          "request": {
            "method": "POST",
            "uri": "http://ip:port/api/v1/elevo/ai-employees",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            },
            "body": "{\n    \"employeeId\": \"emp_123\",\n    \"name\": \"数字人名称\",\n    \"description\": \"数字人描述\",\n    \"industry\": \"技术\",\n    \"role\": \"助手\",\n    \"capabilities\": [\"文档处理\", \"数据分析\", \"代码生成\"],\n    \"excludeTools\": [\"工具1\", \"工具2\"],\n    \"state\": \"active\",\n    \"planTool\": \"plan_tool_id\",\n    \"agent\": {\n        \"instanceId\": \"cmdb_instance_agent_123\"\n    },\n    \"modelConfig\": {\n        \"defaultModel\": \"gpt-4\",\n        \"temperature\": 0.7,\n        \"maxTokens\": 4000,\n        \"baseSystemPrompt\": \"你是一个智能助手\"\n    }\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"message\": \"success\",\n  \"data\": {\n    \"instanceId\": \"cmdb_instance_456\",\n    \"employeeId\": \"emp_123\",\n    \"name\": \"数字人名称\",\n    \"description\": \"数字人描述\",\n    \"industry\": \"技术\",\n    \"role\": \"助手\",\n    \"capabilities\": [\"文档处理\", \"数据分析\"],\n    \"excludeTools\": [\"tool1\"],\n    \"state\": \"active\",\n    \"planTool\": \"plan_tool_id\",\n    \"creator\": \"user123\",\n    \"ctime\": \"2024-01-01T00:00:00Z\",\n    \"mtime\": \"2024-01-01T00:00:00Z\"\n  }\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.elevo.CreateElevoConversation",
      "name": "CreateElevoConversation",
      "version": "1.0.0",
      "description": "创建elevo空会话",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/elevo/conversations"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "projectId",
            "type": "string",
            "description": "项目ID"
          },
          {
            "name": "aiEmployeeId",
            "type": "string",
            "description": "指定数字人ID（可选）"
          }
        ]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "conversationId",
            "type": "string",
            "description": "会话ID"
          },
          {
            "name": "projectId",
            "type": "string",
            "description": "项目ID"
          },
          {
            "name": "state",
            "type": "string",
            "description": "会话状态"
          },
          {
            "name": "title",
            "type": "string",
            "description": "标题"
          },
          {
            "name": "aiEmployeeId",
            "type": "string",
            "description": "分配的数字人ID"
          }
        ]
      },
      "examples": [
        {
          "description": {
            "zh": "创建elevo空会话"
          },
          "request": {
            "method": "POST",
            "uri": "http://ip:port/api/v1/elevo/conversations",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            },
            "body": "{\n    \"projectId\": \"project_123\",\n    \"aiEmployeeId\": \"emp_123\"\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"message\": \"success\",\n  \"data\": {\n    \"conversationId\": \"conv_123\",\n    \"projectId\": \"project_123\",\n    \"state\": \"submitted\",\n    \"title\": \"\",\n    \"aiEmployeeId\": \"emp_123\"\n  }\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.elevo.CreateElevoProject",
      "name": "CreateElevoProject",
      "version": "1.0.0",
      "description": "创建elevo项目",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/elevo/projects"
      },
      "import": [
        "easyops/model/llm/elevo_project"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "name",
            "type": "string",
            "description": "项目名称"
          },
          {
            "name": "description",
            "type": "string",
            "description": "项目描述"
          },
          {
            "name": "defaultAiEmployeeId",
            "type": "string",
            "description": "默认数字人ID"
          },
          {
            "name": "state",
            "type": "string",
            "description": "状态：active, inactive"
          }
        ],
        "required": [
          "name"
        ]
      },
      "response": {
        "type": "ElevoProject"
      },
      "examples": [
        {
          "description": {
            "zh": "创建elevo项目"
          },
          "request": {
            "method": "POST",
            "uri": "http://ip:port/api/v1/elevo/projects",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            },
            "body": "{\n    \"name\": \"项目名称\",\n    \"description\": \"项目描述\",\n    \"defaultAiEmployeeId\": \"ai_employee_id_1\",\n    \"state\": \"active\"\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"message\": \"success\",\n  \"data\": {\n    \"instanceId\": \"cmdb_instance_123\",\n    \"name\": \"项目名称\",\n    \"description\": \"项目描述\",\n    \"state\": \"active\",\n    \"defaultAiEmployeeId\": \"ai_employee_id_1\",\n    \"creator\": \"user123\",\n    \"ctime\": \"2024-01-01T00:00:00Z\",\n    \"mtime\": \"2024-01-01T00:00:00Z\"\n  }\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.elevo.DeleteElevoAgent",
      "name": "DeleteElevoAgent",
      "version": "1.0.0",
      "description": "删除elevo智能体",
      "endpoint": {
        "method": "DELETE",
        "uri": "/api/v1/elevo/agents/:instanceId"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "instanceId",
            "type": "string",
            "description": "智能体实例ID"
          }
        ],
        "required": [
          "instanceId"
        ]
      },
      "response": null,
      "examples": [
        {
          "description": {
            "zh": "删除elevo智能体"
          },
          "request": {
            "method": "DELETE",
            "uri": "http://ip:port/api/v1/elevo/agents/cmdb_instance_789",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            }
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"message\": \"success\"\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.elevo.DeleteElevoAiEmployee",
      "name": "DeleteElevoAiEmployee",
      "version": "1.0.0",
      "description": "删除elevo数字人",
      "endpoint": {
        "method": "DELETE",
        "uri": "/api/v1/elevo/ai-employees/:instanceId"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "instanceId",
            "type": "string",
            "description": "数字人实例ID"
          }
        ],
        "required": [
          "instanceId"
        ]
      },
      "response": null,
      "examples": [
        {
          "description": {
            "zh": "删除elevo数字人"
          },
          "request": {
            "method": "DELETE",
            "uri": "http://ip:port/api/v1/elevo/ai-employees/cmdb_instance_456",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            }
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"message\": \"success\"\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.elevo.DeleteElevoProject",
      "name": "DeleteElevoProject",
      "version": "1.0.0",
      "description": "删除elevo项目",
      "endpoint": {
        "method": "DELETE",
        "uri": "/api/v1/elevo/projects/:instanceId"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "instanceId",
            "type": "string",
            "description": "项目实例ID"
          }
        ],
        "required": [
          "instanceId"
        ]
      },
      "response": null,
      "examples": [
        {
          "description": {
            "zh": "删除elevo项目"
          },
          "request": {
            "method": "DELETE",
            "uri": "http://ip:port/api/v1/elevo/projects/cmdb_instance_123",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            }
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"message\": \"success\"\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.elevo.GetElevoAgent",
      "name": "GetElevoAgent",
      "version": "1.0.0",
      "description": "获取elevo智能体详情",
      "endpoint": {
        "method": "GET",
        "uri": "/api/v1/elevo/agents/:instanceId"
      },
      "import": [
        "easyops/model/llm/elevo_agent"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "instanceId",
            "type": "string",
            "description": "智能体实例ID"
          }
        ],
        "required": [
          "instanceId"
        ]
      },
      "response": {
        "type": "ElevoAgent"
      },
      "examples": [
        {
          "description": {
            "zh": "获取elevo智能体详情"
          },
          "request": {
            "method": "GET",
            "uri": "http://ip:port/api/v1/elevo/agents/cmdb_instance_789",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            }
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"message\": \"success\",\n  \"data\": {\n    \"instanceId\": \"cmdb_instance_789\",\n    \"agentId\": \"agent_123\",\n    \"name\": \"智能助手Agent\",\n    \"description\": \"用于智能助手的基础Agent\",\n    \"state\": \"active\",\n    \"capabilities\": [\"对话\", \"分析\", \"搜索\"],\n    \"mcpServers\": [\"mcp_server_1\", \"mcp_server_2\"],\n    \"planTool\": \"plan_tool_id\",\n    \"creator\": \"user123\",\n    \"ctime\": \"2024-01-01T00:00:00Z\",\n    \"mtime\": \"2024-01-01T00:00:00Z\",\n    \"modifier\": \"user123\"\n  }\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.elevo.GetElevoAiEmployee",
      "name": "GetElevoAiEmployee",
      "version": "1.0.0",
      "description": "获取elevo数字人详情",
      "endpoint": {
        "method": "GET",
        "uri": "/api/v1/elevo/ai-employees/:instanceId"
      },
      "import": [
        "easyops/model/llm/elevo_ai_employee"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "instanceId",
            "type": "string",
            "description": "数字人实例ID"
          }
        ],
        "required": [
          "instanceId"
        ]
      },
      "response": {
        "type": "ElevoAiEmployee"
      },
      "examples": [
        {
          "description": {
            "zh": "获取elevo数字人详情"
          },
          "request": {
            "method": "GET",
            "uri": "http://ip:port/api/v1/elevo/ai-employees/cmdb_instance_456",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            }
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"message\": \"success\",\n  \"data\": {\n    \"instanceId\": \"cmdb_instance_456\",\n    \"employeeId\": \"emp_123\",\n    \"name\": \"智能助手小E\",\n    \"description\": \"专业的智能助手\",\n    \"industry\": \"技术\",\n    \"role\": \"助手\",\n    \"capabilities\": [\"文档处理\", \"数据分析\"],\n    \"excludeTools\": [\"tool1\"],\n    \"state\": \"active\",\n    \"planTool\": \"plan_tool_id\",\n    \"agent\": {\n      \"instanceId\": \"agent_instance_789\",\n      \"agentId\": \"agent_123\",\n      \"name\": \"基础Agent\",\n      \"description\": \"基础智能体\",\n      \"state\": \"active\",\n      \"capabilities\": [\"对话\", \"分析\"],\n      \"mcpServers\": [\"server1\"],\n      \"planTool\": \"plan_tool_id\"\n    },\n    \"modelConfig\": {\n      \"defaultModel\": \"gpt-4\",\n      \"temperature\": 0.7,\n      \"maxTokens\": 4000,\n      \"baseSystemPrompt\": \"你是一个智能助手\"\n    },\n    \"creator\": \"user123\",\n    \"ctime\": \"2024-01-01T00:00:00Z\",\n    \"mtime\": \"2024-01-01T00:00:00Z\",\n    \"modifier\": \"user123\"\n  }\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.elevo.GetElevoConversationState",
      "name": "GetElevoConversationState",
      "version": "1.0.0",
      "description": "获取elevo会话状态",
      "endpoint": {
        "method": "GET",
        "uri": "/api/v1/elevo/conversations/:conversationId/state"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "conversationId",
            "type": "string",
            "description": "会话ID"
          }
        ],
        "required": [
          "conversationId"
        ]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "conversation_id",
            "type": "string",
            "description": "会话ID"
          },
          {
            "name": "state",
            "type": "string",
            "description": "会话状态"
          },
          {
            "name": "updated_at",
            "type": "int",
            "description": "更新时间(毫秒时间戳)"
          }
        ]
      },
      "examples": [
        {
          "description": {
            "zh": "获取elevo会话状态"
          },
          "request": {
            "method": "GET",
            "uri": "http://ip:port/api/v1/elevo/conversations/conv_123/state",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            }
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"message\": \"success\",\n  \"data\": {\n    \"conversation_id\": \"conv_123\",\n    \"state\": \"executing\",\n    \"updated_at\": 1713547260000\n  }\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.elevo.GetElevoConversationStream",
      "name": "GetElevoConversationStream",
      "version": "1.0.0",
      "description": "获取elevo会话流式数据",
      "endpoint": {
        "method": "GET",
        "uri": "/api/v1/elevo/conversations/:conversationId/stream"
      },
      "import": [
        "easyops/model/llm/elevo_conversion_response"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "conversationId",
            "type": "string",
            "description": "会话ID"
          },
          {
            "name": "lastIndex",
            "type": "int",
            "description": "最后一条消息的索引，用于增量拉取"
          }
        ],
        "required": [
          "conversationId"
        ]
      },
      "response": {
        "type": "object",
        "description": "SSE流式数据",
        "fields": [
          {
            "ref": "ElevoConversionResponse.*"
          },
          {
            "name": "sseDataList",
            "type": "value[]",
            "description": "流式数据列表"
          }
        ]
      },
      "examples": [
        {
          "description": {
            "zh": "获取elevo会话流式数据"
          },
          "request": {
            "method": "GET",
            "uri": "http://ip:port/api/v1/elevo/conversations/conv_123/stream?lastIndex=5",
            "headers": {
              "Accept": "text/event-stream",
              "user": "linus",
              "org": 1234
            }
          },
          "response": {
            "headers": {
              "Content-Type": "text/event-stream; charset=utf-8"
            },
            "status_code": 200,
            "body": "data: {\"id\":\"conv_123\",\"tasks\":[{\"id\":\"task_1\", \"state\":\"working\",\"plan\":[{\"id\":\"job_1\",\"instruction\":\"查询城市码\"},{\"id\":\"job_2\",\"instruction\":\"通过城市码查询城市天气\"}]}]}\\n\\n data: {\"id\":\"conv_123\",\"tasks\":[{\"id\":\"task_1\",\"jobs\":[{\"id\":\"job_1\",\"instruction\":\"查询城市码\",\"state\":\"working\",\"toolCall\":{\"name\":\"search_city_code\",\"arguments\":{\"city\":\"深圳\"}}}]}]}\\n\\n data: {\"id\":\"conv_123\",\"tasks\":[{\"id\":\"task_1\",\"jobs\":[{\"id\":\"job_1\",\"state\":\"completed\",\"messages\":[{\"role\":\"assistant\",\"parts\":[{\"type\":\"text\",\"text\":\"SZX\"}]}]}]}]}\\n\\n data: {\"id\":\"conv_123\",\"tasks\":[{\"id\":\"task_1\",\"jobs\":[{\"id\":\"job_2\",\"instruction\":\"通过城市码查询城市天气\",\"state\":\"working\",\"toolCall\":{\"name\":\"search_weather\",\"arguments\":{\"city\":\"SZX\"}}}]}]}\\n\\n\ndata: [DONE]"
          }
        }
      ]
    },
    {
      "contract": "llm.elevo.GetElevoProject",
      "name": "GetElevoProject",
      "version": "1.0.0",
      "description": "获取elevo项目详情",
      "endpoint": {
        "method": "GET",
        "uri": "/api/v1/elevo/projects/:instanceId"
      },
      "import": [
        "easyops/model/llm/elevo_project"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "instanceId",
            "type": "string",
            "description": "项目实例ID"
          }
        ],
        "required": [
          "instanceId"
        ]
      },
      "response": {
        "type": "ElevoProject"
      },
      "examples": [
        {
          "description": {
            "zh": "获取elevo项目详情"
          },
          "request": {
            "method": "GET",
            "uri": "http://ip:port/api/v1/elevo/projects/cmdb_instance_123",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            }
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"message\": \"success\",\n  \"data\": {\n    \"instanceId\": \"cmdb_instance_123\",\n    \"name\": \"项目名称\",\n    \"description\": \"项目描述\",\n    \"state\": \"active\",\n    \"defaultAiEmployeeId\": \"ai_employee_id_1\",\n    \"creator\": \"user123\",\n    \"ctime\": \"2024-01-01T00:00:00Z\",\n    \"mtime\": \"2024-01-01T00:00:00Z\",\n    \"modifier\": \"user123\"\n  }\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.elevo.GetElevoProjects",
      "name": "GetElevoProjects",
      "version": "1.0.0",
      "description": "获取elevo项目列表",
      "endpoint": {
        "method": "list",
        "uri": "/api/v1/elevo/projects"
      },
      "import": [
        "easyops/model/llm/elevo_project"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "page",
            "type": "int",
            "description": "页码"
          },
          {
            "name": "page_size",
            "type": "int",
            "description": "每页数量"
          },
          {
            "name": "key",
            "type": "string",
            "description": "搜索关键词"
          },
          {
            "name": "state",
            "type": "string",
            "description": "状态过滤"
          }
        ]
      },
      "response": {
        "type": "ElevoProject"
      },
      "examples": [
        {
          "description": {
            "zh": "获取elevo项目列表"
          },
          "request": {
            "method": "GET",
            "uri": "http://ip:port/api/v1/elevo/projects?page=1&page_size=20&key=数据分析&state=active",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            }
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"message\": \"success\",\n  \"data\": {\n    \"page\": 1,\n    \"page_size\": 20,\n    \"total\": 1,\n    \"list\": [\n      {\n        \"instanceId\": \"cmdb_instance_123\",\n        \"name\": \"数据分析项目\",\n        \"description\": \"用于分析销售数据的项目\",\n        \"state\": \"active\",\n        \"defaultAiEmployeeId\": \"ai_employee_id_1\",\n        \"creator\": \"user123\",\n        \"ctime\": \"2024-01-01T00:00:00Z\",\n        \"mtime\": \"2024-01-01T00:00:00Z\"\n      }\n    ]\n  }\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.elevo.ListElevoAgents",
      "name": "ListElevoAgents",
      "version": "1.0.0",
      "description": "获取elevo智能体列表",
      "endpoint": {
        "method": "list",
        "uri": "/api/v1/elevo/agents"
      },
      "import": [
        "easyops/model/llm/elevo_agent"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "page",
            "type": "int",
            "description": "页码"
          },
          {
            "name": "page_size",
            "type": "int",
            "description": "每页数量"
          },
          {
            "name": "key",
            "type": "string",
            "description": "搜索关键词"
          },
          {
            "name": "state",
            "type": "string",
            "description": "状态过滤"
          }
        ]
      },
      "response": {
        "type": "ElevoAgent"
      },
      "examples": [
        {
          "description": {
            "zh": "获取elevo智能体列表"
          },
          "request": {
            "method": "GET",
            "uri": "http://ip:port/api/v1/elevo/agents?page=1&page_size=20&key=智能助手&state=active",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            }
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"message\": \"success\",\n  \"data\": {\n    \"page\": 1,\n    \"page_size\": 20,\n    \"total\": 1,\n    \"list\": [\n      {\n        \"instanceId\": \"cmdb_instance_789\",\n        \"agentId\": \"agent_123\",\n        \"name\": \"智能助手Agent\",\n        \"description\": \"用于智能助手的基础Agent\",\n        \"state\": \"active\",\n        \"capabilities\": [\"对话\", \"分析\", \"搜索\"],\n        \"mcpServers\": [\"mcp_server_1\", \"mcp_server_2\"],\n        \"planTool\": \"plan_tool_id\",\n        \"creator\": \"user123\",\n        \"ctime\": \"2024-01-01T00:00:00Z\",\n        \"mtime\": \"2024-01-01T00:00:00Z\"\n      }\n    ]\n  }\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.elevo.ListElevoAiEmployees",
      "name": "ListElevoAiEmployees",
      "version": "1.0.0",
      "description": "获取elevo数字人列表",
      "endpoint": {
        "method": "list",
        "uri": "/api/v1/elevo/ai-employees"
      },
      "import": [
        "easyops/model/llm/elevo_ai_employee"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "projectId",
            "type": "string",
            "description": "项目ID"
          },
          {
            "name": "page",
            "type": "int",
            "description": "页码"
          },
          {
            "name": "page_size",
            "type": "int",
            "description": "每页数量"
          },
          {
            "name": "key",
            "type": "string",
            "description": "搜索关键词"
          },
          {
            "name": "state",
            "type": "string",
            "description": "状态过滤"
          }
        ]
      },
      "response": {
        "type": "ElevoAiEmployee"
      },
      "examples": [
        {
          "description": {
            "zh": "获取elevo数字人列表"
          },
          "request": {
            "method": "GET",
            "uri": "http://ip:port/api/v1/elevo/ai-employees?projectId=project_123&page=1&page_size=20&key=智能助手&state=active",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            }
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"message\": \"success\",\n  \"data\": {\n    \"page\": 1,\n    \"page_size\": 20,\n    \"total\": 1,\n    \"list\": [\n      {\n        \"instanceId\": \"cmdb_instance_456\",\n        \"employeeId\": \"emp_123\",\n        \"name\": \"智能助手小E\",\n        \"description\": \"专业的智能助手\",\n        \"industry\": \"技术\",\n        \"role\": \"助手\",\n        \"capabilities\": [\"文档处理\", \"数据分析\"],\n        \"excludeTools\": [\"tool1\"],\n        \"state\": \"active\",\n        \"planTool\": \"plan_tool_id\",\n        \"creator\": \"user123\",\n        \"ctime\": \"2024-01-01T00:00:00Z\",\n        \"mtime\": \"2024-01-01T00:00:00Z\"\n      }\n    ]\n  }\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.elevo.ListElevoAiEmployeesByProject",
      "name": "ListElevoAiEmployeesByProject",
      "version": "1.0.0",
      "description": "获取指定项目的elevo数字人列表",
      "endpoint": {
        "method": "list",
        "uri": "/api/v1/elevo/ai-employees/by-project/:projectId"
      },
      "import": [
        "easyops/model/llm/elevo_ai_employee"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "projectId",
            "type": "string",
            "description": "项目ID"
          },
          {
            "name": "page",
            "type": "int",
            "description": "页码"
          },
          {
            "name": "page_size",
            "type": "int",
            "description": "每页数量"
          },
          {
            "name": "key",
            "type": "string",
            "description": "搜索关键词"
          },
          {
            "name": "state",
            "type": "string",
            "description": "状态过滤"
          }
        ],
        "required": [
          "projectId"
        ]
      },
      "response": {
        "type": "ElevoAiEmployee"
      },
      "examples": [
        {
          "description": {
            "zh": "获取指定项目的elevo数字人列表"
          },
          "request": {
            "method": "GET",
            "uri": "http://ip:port/api/v1/elevo/ai-employees/by-project/project_123?page=1&page_size=20&key=智能助手&state=active",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            }
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"message\": \"success\",\n  \"data\": {\n    \"page\": 1,\n    \"page_size\": 20,\n    \"total\": 1,\n    \"list\": [\n      {\n        \"instanceId\": \"cmdb_instance_456\",\n        \"employeeId\": \"emp_123\",\n        \"name\": \"智能助手小E\",\n        \"description\": \"专业的智能助手\",\n        \"industry\": \"技术\",\n        \"role\": \"助手\",\n        \"capabilities\": [\"文档处理\", \"数据分析\"],\n        \"excludeTools\": [\"tool1\"],\n        \"state\": \"active\",\n        \"planTool\": \"plan_tool_id\",\n        \"creator\": \"user123\",\n        \"ctime\": \"2024-01-01T00:00:00Z\",\n        \"mtime\": \"2024-01-01T00:00:00Z\"\n      }\n    ]\n  }\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.elevo.ListElevoConversations",
      "name": "ListElevoConversations",
      "version": "1.0.0",
      "description": "获取elevo会话列表",
      "endpoint": {
        "method": "GET",
        "uri": "/api/v1/elevo/conversations"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "projectId",
            "type": "string",
            "description": "项目ID"
          },
          {
            "name": "username",
            "type": "string",
            "description": "用户名"
          },
          {
            "name": "state",
            "type": "string",
            "description": "会话状态（submitted, working, completed）"
          },
          {
            "name": "title",
            "type": "string",
            "description": "标题搜索关键词"
          },
          {
            "name": "token",
            "type": "string",
            "description": "分页token"
          },
          {
            "name": "limit",
            "type": "int",
            "description": "每页数量"
          },
          {
            "name": "onlyOwner",
            "type": "bool",
            "description": "是否只查询当前用户的会话"
          }
        ]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "conversations",
            "type": "object[]",
            "description": "会话列表",
            "fields": [
              {
                "name": "conversationId",
                "type": "string",
                "description": "会话ID"
              },
              {
                "name": "projectId",
                "type": "string",
                "description": "项目ID"
              },
              {
                "name": "title",
                "type": "string",
                "description": "会话标题"
              },
              {
                "name": "state",
                "type": "string",
                "description": "会话状态"
              },
              {
                "name": "leadAiEmployeeId",
                "type": "string",
                "description": "主导数字人ID"
              },
              {
                "name": "lastLeadAiEmployeeId",
                "type": "string",
                "description": "上次主导的数字人ID"
              },
              {
                "name": "username",
                "type": "string",
                "description": "用户名"
              },
              {
                "name": "rootContextId",
                "type": "string",
                "description": "根上下文ID"
              },
              {
                "name": "executingContextId",
                "type": "string",
                "description": "当前执行中的上下文ID"
              },
              {
                "name": "time",
                "type": "int",
                "description": "创建时间(毫秒时间戳)"
              },
              {
                "name": "updatedAt",
                "type": "int",
                "description": "更新时间(毫秒时间戳)"
              }
            ]
          },
          {
            "name": "nextToken",
            "type": "string",
            "description": "下一页token"
          },
          {
            "name": "previousToken",
            "type": "string",
            "description": "上一页token"
          }
        ]
      },
      "examples": [
        {
          "description": {
            "zh": "获取elevo会话列表"
          },
          "request": {
            "method": "GET",
            "uri": "http://ip:port/api/v1/elevo/conversations?projectId=project_123&token=next_page_token&limit=20&onlyOwner=true",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            },
            "body": "{\n    \"projectId\": \"project_123\",\n    \"token\": \"next_token_123\",\n    \"limit\": 20,\n    \"title\": \"数据分析\",\n    \"only_owner\": true\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"message\": \"success\",\n  \"data\": {\n    \"conversations\": [\n      {\n        \"conversationId\": \"conv_123\",\n        \"projectId\": \"project_123\",\n        \"title\": \"数据分析任务\",\n        \"state\": \"working\",\n        \"leadAiEmployeeId\": \"emp_123\",\n        \"lastLeadAiEmployeeId\": \"emp_122\",\n        \"username\": \"user123\",\n        \"rootContextId\": \"ctx_root_123\",\n        \"executingContextId\": \"ctx_exec_456\",\n        \"time\": 1640995200000,\n        \"updatedAt\": 1640995260000\n      }\n    ],\n    \"nextToken\": \"next_page_token_here\",\n    \"previousToken\": \"previous_page_token_here\"\n  }\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.elevo.ListUsersByProject",
      "name": "ListUsersByProject",
      "version": "1.0.0",
      "description": "获取指定项目的用户列表",
      "endpoint": {
        "method": "GET",
        "uri": "/api/v1/elevo/project-users/:projectInstanceId/list-users"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "projectInstanceId",
            "type": "string",
            "description": "项目ID"
          },
          {
            "name": "page",
            "type": "int",
            "description": "页码"
          },
          {
            "name": "page_size",
            "type": "int",
            "description": "每页数量"
          }
        ],
        "required": [
          "projectInstanceId"
        ]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "users",
            "type": "object[]",
            "description": "项目内的成员",
            "fields": [
              {
                "name": "instanceId",
                "type": "string",
                "description": "用户的instanceId"
              },
              {
                "name": "name",
                "type": "string",
                "description": "用户的名称"
              }
            ]
          },
          {
            "name": "page",
            "type": "int",
            "description": "页码"
          },
          {
            "name": "page_size",
            "type": "int",
            "description": "每页数量"
          },
          {
            "name": "total",
            "type": "int",
            "description": "总数"
          }
        ]
      },
      "examples": [
        {
          "description": {
            "zh": "获取指定项目的用户列表"
          },
          "request": {
            "method": "GET",
            "uri": "http://ip:port/api/v1/elevo/projects/project_123/list-users",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            }
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"users\": [\n    {\n      \"instanceId\": \"fjdkalsfa43\",\n      \"name\": \"linus\"\n    }\n  ]\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.elevo.SendElevoMessage",
      "name": "SendElevoMessage",
      "version": "1.0.0",
      "description": "发送elevo会话消息",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/elevo/conversations/:conversationId/messages"
      },
      "import": [
        "easyops/model/llm/elevo_conversion_response"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "conversationId",
            "type": "string",
            "description": "会话ID"
          },
          {
            "name": "content",
            "type": "string",
            "description": "用户输入内容"
          }
        ],
        "required": [
          "conversationId"
        ]
      },
      "response": {
        "type": "object",
        "description": "SSE流式数据",
        "fields": [
          {
            "ref": "ElevoConversionResponse.*"
          },
          {
            "name": "sseDataList",
            "type": "value[]",
            "description": "流式数据列表"
          }
        ]
      },
      "examples": [
        {
          "description": {
            "zh": "发送elevo会话消息"
          },
          "request": {
            "method": "POST",
            "uri": "http://ip:port/api/v1/elevo/conversations/conv_123/messages",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            },
            "body": "{\n    \"content\": \"请帮我分析销售数据\",\n    \"message_type\": \"text\"\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "text/event-stream; charset=utf-8"
            },
            "status_code": 200,
            "body": "data: {\"id\":\"conv_123\",\"tasks\":[{\"id\":\"task_1\", \"state\":\"working\",\"plan\":[{\"id\":\"job_1\",\"instruction\":\"查询城市码\"},{\"id\":\"job_2\",\"instruction\":\"通过城市码查询城市天气\"}]}]}\\n\\n data: {\"id\":\"conv_123\",\"tasks\":[{\"id\":\"task_1\",\"jobs\":[{\"id\":\"job_1\",\"instruction\":\"查询城市码\",\"state\":\"working\",\"toolCall\":{\"name\":\"search_city_code\",\"arguments\":{\"city\":\"深圳\"}}}]}]}\\n\\n data: {\"id\":\"conv_123\",\"tasks\":[{\"id\":\"task_1\",\"jobs\":[{\"id\":\"job_1\",\"state\":\"completed\",\"messages\":[{\"role\":\"assistant\",\"parts\":[{\"type\":\"text\",\"text\":\"SZX\"}]}]}]}]}\\n\\n data: {\"id\":\"conv_123\",\"tasks\":[{\"id\":\"task_1\",\"jobs\":[{\"id\":\"job_2\",\"instruction\":\"通过城市码查询城市天气\",\"state\":\"working\",\"toolCall\":{\"name\":\"search_weather\",\"arguments\":{\"city\":\"SZX\"}}}]}]}\\n\\n\ndata: [DONE]"
          }
        }
      ]
    },
    {
      "contract": "llm.elevo.TerminateElevoConversation",
      "name": "TerminateElevoConversation",
      "version": "1.0.0",
      "description": "终止elevo会话",
      "endpoint": {
        "method": "PUT",
        "uri": "/api/v1/elevo/conversations/:conversationId/terminate"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "conversationId",
            "type": "string",
            "description": "会话ID"
          },
          {
            "name": "reason",
            "type": "string",
            "description": "终止原因"
          }
        ],
        "required": [
          "conversationId"
        ]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "conversation_id",
            "type": "string",
            "description": "会话ID"
          }
        ]
      },
      "examples": [
        {
          "description": {
            "zh": "终止elevo会话"
          },
          "request": {
            "method": "PUT",
            "uri": "http://ip:port/api/v1/elevo/conversations/conv_123/terminate",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            },
            "body": "{\n    \"reason\": \"用户主动终止\"\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"message\": \"success\",\n  \"data\": {\n    \"conversation_id\": \"conv_123\"\n  }\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.elevo.UnbindProjectAiEmployees",
      "name": "UnbindProjectAiEmployees",
      "version": "1.0.0",
      "description": "解绑项目与数字人关系",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/elevo/projects/:projectInstanceId/unbind-ai-employees"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "projectInstanceId",
            "type": "string",
            "description": "项目实例ID"
          },
          {
            "name": "aiEmployeeInstanceIds",
            "type": "string[]",
            "description": "数字人实例ID列表"
          }
        ],
        "required": [
          "projectInstanceId",
          "aiEmployeeInstanceIds"
        ]
      },
      "response": null,
      "examples": [
        {
          "description": {
            "zh": "解绑项目与数字人关系"
          },
          "request": {
            "method": "POST",
            "uri": "http://ip:port/api/v1/elevo/projects/project_123/unbind-ai-employees",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            },
            "body": "{\n  \"projectInstanceId\": \"project_123\",\n  \"aiEmployeeInstanceIds\": [\"emp_001\", \"emp_002\", \"emp_003\"]\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"message\": \"success\"\n  }\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.elevo.UnbindProjectUsers",
      "name": "UnbindProjectUsers",
      "version": "1.0.0",
      "description": "解绑项目与用户关系",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/elevo/project-users/:projectInstanceId/unbind-users"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "projectInstanceId",
            "type": "string",
            "description": "项目实例ID"
          },
          {
            "name": "instanceIds",
            "type": "string[]",
            "description": "用户instanceId列表"
          }
        ],
        "required": [
          "projectInstanceId",
          "instanceIds"
        ]
      },
      "response": null,
      "examples": [
        {
          "description": {
            "zh": "解绑项目与数字人关系"
          },
          "request": {
            "method": "POST",
            "uri": "http://ip:port/api/v1/elevo/projects/project_123/unbind-users",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            },
            "body": "{\n  \"projectInstanceId\": \"project_123\",\n  \"instanceIds\": [\"fdslfa12\"]\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"message\": \"success\"\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.elevo.UpdateElevoAgent",
      "name": "UpdateElevoAgent",
      "version": "1.0.0",
      "description": "更新elevo智能体",
      "endpoint": {
        "method": "PUT",
        "uri": "/api/v1/elevo/agents/:instanceId"
      },
      "import": [
        "easyops/model/llm/elevo_agent"
      ],
      "request": {
        "type": "ElevoAgent"
      },
      "response": {
        "type": "ElevoAgent"
      },
      "examples": [
        {
          "description": {
            "zh": "更新elevo智能体"
          },
          "request": {
            "method": "PUT",
            "uri": "http://ip:port/api/v1/elevo/agents/cmdb_instance_789",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            },
            "body": "{\n    \"name\": \"更新后的智能体名称\",\n    \"description\": \"更新后的描述\",\n    \"state\": \"active\",\n    \"capabilities\": [\"对话\", \"分析\", \"推理\"],\n    \"mcpServers\": [\"mcp_server_2\", \"mcp_server_3\"],\n    \"planTool\": \"new_plan_tool_id\",\n    \"modelConfig\": {\n        \"defaultModel\": \"gpt-4-turbo\",\n        \"temperature\": 0.5,\n        \"maxTokens\": 8000,\n        \"baseSystemPrompt\": \"你是一个专业的智能助手Agent\"\n    }\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"message\": \"success\",\n  \"data\": {\n    \"instanceId\": \"cmdb_instance_789\",\n    \"agentId\": \"agent_123\",\n    \"name\": \"更新后的智能体名称\",\n    \"description\": \"更新后的描述\",\n    \"state\": \"active\",\n    \"capabilities\": [\"对话\", \"分析\", \"推理\"],\n    \"mcpServers\": [\"mcp_server_2\", \"mcp_server_3\"],\n    \"planTool\": \"new_plan_tool_id\",\n    \"modelConfig\": {\n        \"defaultModel\": \"gpt-4-turbo\",\n        \"temperature\": 0.5,\n        \"maxTokens\": 8000,\n        \"baseSystemPrompt\": \"你是一个专业的智能助手Agent\"\n    },\n    \"creator\": \"user123\",\n    \"ctime\": \"2024-01-01T00:00:00Z\",\n    \"mtime\": \"2024-01-02T00:00:00Z\",\n    \"modifier\": \"user456\"\n  }\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.elevo.UpdateElevoAiEmployee",
      "name": "UpdateElevoAiEmployee",
      "version": "1.0.0",
      "description": "更新elevo数字人",
      "endpoint": {
        "method": "PUT",
        "uri": "/api/v1/elevo/ai-employees/:instanceId"
      },
      "import": [
        "easyops/model/llm/elevo_ai_employee"
      ],
      "request": {
        "type": "ElevoAiEmployee"
      },
      "response": {
        "type": "ElevoAiEmployee"
      },
      "examples": [
        {
          "description": {
            "zh": "更新elevo数字人"
          },
          "request": {
            "method": "PUT",
            "uri": "http://ip:port/api/v1/elevo/ai-employees/cmdb_instance_456",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            },
            "body": "{\n    \"name\": \"更新后的数字人名称\",\n    \"description\": \"更新后的描述\",\n    \"industry\": \"金融\",\n    \"role\": \"顾问\",\n    \"capabilities\": [\"数据分析\", \"报告生成\"],\n    \"excludeTools\": [\"tool2\"],\n    \"state\": \"active\",\n    \"planTool\": \"new_plan_tool_id\",\n    \"agent\": {\n        \"instanceId\": \"cmdb_instance_agent_456\"\n    },\n    \"modelConfig\": {\n        \"defaultModel\": \"gpt-4-turbo\",\n        \"temperature\": 0.5,\n        \"maxTokens\": 8000,\n        \"baseSystemPrompt\": \"你是一个专业的金融顾问\"\n    }\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"message\": \"success\",\n  \"data\": {\n    \"instanceId\": \"cmdb_instance_456\",\n    \"employeeId\": \"emp_123\",\n    \"name\": \"更新后的数字人名称\",\n    \"description\": \"更新后的描述\",\n    \"industry\": \"金融\",\n    \"role\": \"顾问\",\n    \"capabilities\": [\"数据分析\", \"报告生成\"],\n    \"excludeTools\": [\"tool2\"],\n    \"state\": \"active\",\n    \"planTool\": \"new_plan_tool_id\",\n    \"creator\": \"user123\",\n    \"ctime\": \"2024-01-01T00:00:00Z\",\n    \"mtime\": \"2024-01-02T00:00:00Z\",\n    \"modifier\": \"user456\"\n  }\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.elevo.UpdateElevoProject",
      "name": "UpdateElevoProject",
      "version": "1.0.0",
      "description": "更新elevo项目",
      "endpoint": {
        "method": "PUT",
        "uri": "/api/v1/elevo/projects/:instanceId"
      },
      "import": [
        "easyops/model/llm/elevo_project"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "instanceId",
            "type": "string",
            "description": "项目实例ID"
          },
          {
            "name": "name",
            "type": "string",
            "description": "更新后的项目名称"
          },
          {
            "name": "description",
            "type": "string",
            "description": "更新后的描述"
          },
          {
            "name": "state",
            "type": "string",
            "description": "状态：active, inactive"
          },
          {
            "name": "defaultAiEmployeeId",
            "type": "string",
            "description": "新的默认数字人ID"
          }
        ],
        "required": [
          "instanceId"
        ]
      },
      "response": {
        "type": "ElevoProject"
      },
      "examples": [
        {
          "description": {
            "zh": "更新elevo项目"
          },
          "request": {
            "method": "PUT",
            "uri": "http://ip:port/api/v1/elevo/projects/cmdb_instance_123",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            },
            "body": "{\n    \"name\": \"更新后的项目名称\",\n    \"description\": \"更新后的描述\",\n    \"state\": \"active\",\n    \"defaultAiEmployeeId\": \"new_ai_employee_id\"\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"message\": \"success\"\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.virtual_builder.GenerateStoryboard",
      "name": "GenerateStoryboard",
      "version": "1.0.0",
      "description": "自动生成brick",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/virtual_builder/generate_storyboard"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "userInput",
            "type": "string",
            "description": "用户输入"
          },
          {
            "name": "sessionId",
            "type": "string",
            "description": "会话id"
          }
        ],
        "required": [
          "userInput"
        ]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "outputs",
            "type": "object[]",
            "description": "llm的输出",
            "fields": [
              {
                "name": "type",
                "type": "string",
                "enum": [
                  "markdown",
                  "storyboard"
                ],
                "description": "输出内容的类型,markdown或者storyboard"
              },
              {
                "name": "content",
                "type": "string",
                "description": "输出内容"
              }
            ]
          },
          {
            "name": "sessionId",
            "type": "string",
            "description": "会话id"
          }
        ]
      },
      "examples": [
        {
          "description": {
            "zh": "自动生成storyboard"
          },
          "request": {
            "method": "POST",
            "uri": "http://localhost:8095/api/v1/llm/virtual_builder/generate_storyboard",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            },
            "body": "{\n    \"userInput\": \"生成一个通用按钮,圆形\",\n    \"sessionId\": \"1233abc\"\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"error\": \"\",\n  \"message\": \"\",\n  \"data\": {\n      \"outputs\":[\n         {\"type\":\"markdown\",\"content\":\"根据用户需求，生成以下storyboard\"},\n         {\"type\":\"storyboard\",\"content\":\"{\\\"brick\\\":\\\"abc\\\"}\"},\n         {\"type\":\"markdown\",\"content\":\"\"},\n      ],\n      \"sessionId\":\"12345\"\n\n  }\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.virtual_builder.GenerateStoryboardStream",
      "name": "GenerateStoryboardStream",
      "version": "1.0.0",
      "description": "流式自动生成brick",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/virtual_builder/generate_storyboard/stream"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "userInput",
            "type": "string",
            "description": "用户输入"
          },
          {
            "name": "sessionId",
            "type": "string",
            "description": "会话id"
          }
        ],
        "required": [
          "userInput"
        ]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "websocket",
            "type": "object",
            "description": "websocket消息信息",
            "fields": [
              {
                "name": "system",
                "type": "string",
                "description": "websocket消息的system"
              },
              {
                "name": "topic",
                "type": "string",
                "description": "websocket消息的topic"
              }
            ]
          },
          {
            "name": "sessionId",
            "type": "string",
            "description": "会话id"
          }
        ]
      },
      "examples": [
        {
          "description": {
            "zh": "自动生成storyboard"
          },
          "request": {
            "method": "POST",
            "uri": "http://localhost:8095/api/v1/llm/virtual_builder/generate_storyboard",
            "headers": {
              "Content-Type": "application/json",
              "user": "linus",
              "org": 1234
            },
            "body": "{\n    \"userInput\": \"生成一个通用按钮,圆形\",\n    \"sessionId\": \"1233abc\"\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"code\": 0,\n  \"error\": \"\",\n  \"message\": \"\",\n  \"data\": {\n      \"websocket\": {\n           \"system\":\"aiops\",\n           \"topic\":\"aiops.visual_builder.generate_dashboard.12345\"\n           },\n      \"sessionId\":\"12345\"\n\n  }\n}"
          }
        }
      ]
    },
    {
      "contract": "llm.webhook.AlertWebhook",
      "name": "AlertWebhook",
      "version": "1.0.0",
      "description": "告警webhook",
      "endpoint": {
        "method": "POST",
        "uri": "/api/v1/llm/webhook/alert_webhook"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "alertCount",
            "type": "int",
            "description": "告警次数"
          },
          {
            "name": "alertId",
            "type": "string",
            "description": "告警id"
          },
          {
            "name": "originContent",
            "type": "string",
            "description": "告警内容"
          },
          {
            "name": "target",
            "type": "string",
            "description": "告警目标"
          },
          {
            "name": "time",
            "type": "int64",
            "description": "告警时间"
          },
          {
            "name": "startTime",
            "type": "int64",
            "description": "最早告警时间"
          },
          {
            "name": "level",
            "type": "string",
            "description": "告警等级"
          },
          {
            "name": "objectId",
            "type": "string",
            "description": "告警的objectId"
          },
          {
            "name": "instanceId",
            "type": "string",
            "description": "告警的实例Id"
          },
          {
            "name": "isRecover",
            "type": "bool",
            "description": "是否已经恢复"
          }
        ]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "success",
            "type": "bool",
            "description": "是否成功接收"
          }
        ]
      },
      "examples": [
        {
          "description": {
            "zh": "接收告警"
          },
          "request": {
            "method": "POST",
            "uri": "http://localhost:8095/api/v1/llm/webhook/alert_webhook",
            "headers": {
              "Content-Type": "application/json",
              "user": "easyops",
              "org": 8888
            },
            "body": "{\n  \"alertCount\": 1,\n  \"alertDims\": {\n    \"111\": [\n      \"172.16.244.2(\\u8d85\\u4f19-\\u6d4b\\u8bd5-Redis)\"\n    ],\n    \"12222\": [\n      \"172.16.244.2(\\u8d85\\u4f19-\\u6d4b\\u8bd5-Redis)\"\n    ],\n    \"_job\": \"623f2b5f12a95\",\n    \"appSystemNames\": [],\n    \"businessIds\": [],\n    \"cInstanceShowKey\": [\n      \"172.16.244.2(\\u8d85\\u4f19-\\u6d4b\\u8bd5-Redis)\"\n    ],\n    \"cObjectId\": \"REDIS@ONEMODEL\",\n    \"cPluginName\": [\n      \"Redis\\u4fe1\\u606f\\u91c7\\u96c6\"\n    ],\n    \"collectorId\": \"6371a83ba897d\",\n    \"instanceId\": \"623f2b5f12a95\",\n    \"objectId\": \"_COLLECTOR_JOB\"\n  },\n  \"alertId\": \"3e18164af7d3c357f07429fc5314fe64\",\n  \"alertReceivers\": [],\n  \"alertRuleId\": \"63af9d6205381\",\n  \"alertRuleVersion\": 3,\n  \"content\": \"\",\n  \"eventId\": \"689102d3ff66ceb56cfcd8bc\",\n  \"handlers\": [\n  ],\n  \"instance\": {\n    \"#showKey\": [\n      \"redis info\"\n    ],\n    \"_object_id\": \"_COLLECTOR_JOB\",\n    \"instanceId\": \"623f2b5f12a95\",\n    \"plugins\": [\n      {\n        \"_object_id\": \"_COLLECTOR_EASYOPS_PLUGIN\",\n        \"instanceId\": \"61825bf393cdd\",\n        \"name\": \"Redis\\u4fe1\\u606f\\u91c7\\u96c6\"\n      }\n    ],\n    \"resDiscoveryConfigs\": []\n  },\n  \"instanceId\": \"623f2b5f12a95\",\n  \"isRecover\": false,\n  \"level\": \"info\",\n  \"metricName\": \"metric_status\",\n  \"metricThreshold\": \"2\",\n  \"metricThresholdComparator\": \"equal\",\n  \"metricThresholdValue\": 2,\n  \"metricUnit\": \"\",\n  \"metricValue\": 2,\n  \"objectId\": \"_COLLECTOR_JOB\",\n  \"org\": 5910,\n  \"originContent\": \"metric_status: 2\\u7b49\\u4e8e2\",\n  \"recoverType\": \"auto\",\n  \"resource\": \"\",\n  \"source\": \"system\",\n  \"startTime\": 1754333907,\n  \"status\": \"group\",\n  \"subject\": \"\",\n  \"target\": \"redis info\",\n  \"time\": 1754333907,\n  \"triggeredCondition\": {\n    \"alertCount\": 3,\n    \"alertDims\": [],\n    \"comparators\": [\n      {\n        \"desc\": \"info\",\n        \"level\": 0,\n        \"params\": [],\n        \"threshold\": 2,\n        \"tolerance\": 0,\n        \"type\": \"equal\"\n      },\n      {\n        \"desc\": \"warning\",\n        \"level\": 1,\n        \"params\": [],\n        \"threshold\": null,\n        \"tolerance\": 0,\n        \"type\": \"equal\"\n      },\n      {\n        \"desc\": \"critical\",\n        \"level\": 2,\n        \"params\": [],\n        \"threshold\": null,\n        \"tolerance\": 0,\n        \"type\": \"equal\"\n      }\n    ],\n    \"detectWindow\": 3,\n    \"metricName\": \"metric_status\",\n    \"mode\": \"static\",\n    \"recoverCount\": 5,\n    \"type\": \"equal\"\n  }\n}"
          },
          "response": {
            "headers": {
              "Content-Type": "application/json; charset=utf-8"
            },
            "status_code": 200,
            "body": "{\n  \"success\": true\n}"
          }
        }
      ]
    }
  ]
}